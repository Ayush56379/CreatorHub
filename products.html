<!DOCTYPE html>
<html>

<head>

<title>Ebook Detail - CreatorHub</title>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<style>

body{

font-family:Arial;

margin:0;

background:#f2f2f2;

}

/* NAV */

nav{

background:black;

color:white;

padding:15px;

display:flex;

justify-content:space-between;

align-items:center;

}

.backBtn{

cursor:pointer;

font-weight:bold;

}

/* CONTAINER */

.container{

padding:20px;

max-width:650px;

margin:auto;

}

.card{

background:white;

padding:20px;

border-radius:12px;

box-shadow:0 0 12px #ccc;

text-align:center;

}

img{

width:100%;

border-radius:10px;

}

button{

width:100%;

padding:12px;

margin-top:12px;

border:none;

border-radius:8px;

cursor:pointer;

font-size:16px;

font-weight:bold;

}

.buy{

background:orange;

color:black;

}

.cart{

background:black;

color:white;

}

.info{

background:#fff3cd;

padding:15px;

border-radius:10px;

margin-top:15px;

text-align:left;

}

</style>

</head>

<body>



<nav>

üî• CreatorHub

<div class="backBtn"

onclick="history.back()">

‚¨Ö Back

</div>

</nav>



<div class="container">

<div id="product">

Loading Product...

</div>

</div>



<script>

const API="https://creatorhub-f2fe.onrender.com/api";



// ‚≠ê PRODUCT ID GET

const params=

new URLSearchParams(

window.location.search

);

const id=params.get("id");

console.log("Product ID =",id);


// ID missing

if(!id){

document.getElementById("product")

.innerHTML="‚ùå Product ID Missing";

throw "No Product ID";

}



// LOAD PRODUCT SAFE

async function loadProduct(){

try{


// ‚≠ê ‡§∏‡§æ‡§∞‡•á products ‡§≤‡§æ ‡§∞‡§π‡•á

const res=

await fetch(API+"/products");

const data=

await res.json();


// FIND PRODUCT

const product=

data.products.find(

p=>p._id===id

);


// ‡§Ö‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ

if(!product){

throw "Missing Product";

}


// SHOW PRODUCT

document.getElementById("product")

.innerHTML=`

<div class="card">


<img src="${
product.image ||
'https://picsum.photos/500'
}">


<h2>

${product.title}

</h2>


<h3>

‚Çπ${product.price}

</h3>


<div class="info">

üìò Buyer Process :

<br><br>

‚úî Click Buy Ebook

<br>

‚úî Pay QR

<br>

‚úî Upload Screenshot

<br>

‚úî Admin Approval

<br>

‚úî Ebook Unlock üî•

</div>


<button class="buy"

onclick="buyNow('${product._id}')">

Buy Ebook

</button>


<button class="cart"

onclick='addCart(${JSON.stringify(product)})'>

Add To Cart

</button>


</div>

`;

}

catch(error){

console.log(error);

document.getElementById("product")

.innerHTML=

"‚ùå Product Not Found";

}

}

loadProduct();



// BUY

function buyNow(id){

const token=

localStorage.getItem("token");

if(!token){

alert("Login First üîê");

location.href="login.html";

return;

}

localStorage.setItem(

"buyProduct",

id

);

location.href="payment.html";

}



// ADD CART

function addCart(product){

let cart=

JSON.parse(

localStorage.getItem("cart")

)||[];

cart.push(product);

localStorage.setItem(

"cart",

JSON.stringify(cart)

);

alert("Added To Cart üõí");

}

</script>

</body>

</html>
