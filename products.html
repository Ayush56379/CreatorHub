<!DOCTYPE html><html><head><title>Ebook Detail</title><meta name="viewport" content="width=device-width,initial-scale=1"><style>

body{
font-family:Arial;
margin:0;
background:#f2f2f2;
}

nav{
background:black;
color:white;
padding:15px;
display:flex;
justify-content:space-between;
align-items:center;
}

.back{

cursor:pointer;
font-weight:bold;

}

.container{

padding:20px;
max-width:600px;
margin:auto;

}

.card{

background:white;
padding:20px;
border-radius:12px;
box-shadow:0 0 10px #ccc;
text-align:center;

}

img{

width:100%;
border-radius:10px;

}

.buy{

background:orange;
border:none;
padding:12px;
width:100%;
margin-top:10px;
cursor:pointer;
font-size:16px;
font-weight:bold;

}

.cart{

background:black;
color:white;
border:none;
padding:12px;
width:100%;
margin-top:10px;
cursor:pointer;

}

.info{

background:#fff3cd;
padding:15px;
border-radius:10px;
margin-top:15px;
text-align:left;

}

</style></head><body><nav>üî• CreatorHub

<div class="back"onclick="goBack()">

‚¨Ö Back

</div></nav><div class="container"><div id="product">Loading...

</div></div><script>

const API=
"https://creatorhub-f2fe.onrender.com/api";



// ‚≠ê BACK BUTTON

function goBack(){

location.href="products.html";

}



// GET PRODUCT ID

const params=
new URLSearchParams(
location.search
);

const id=
params.get("id");


// IF ID NOT FOUND

if(!id){

document.getElementById(
"product"
).innerHTML="‚ùå Invalid Product";

}



// LOAD PRODUCT

async function loadProduct(){

try{

const res=
await fetch(

API+"/products/"+id

);

const data=
await res.json();


// API FAIL CHECK

if(!data.success){

throw "error";

}


const p=
data.product;


// PDF SAVE

localStorage.setItem(

"ebookPdf",

p.pdf

);


// DRIVE IMAGE FIX

let imageLink=
p.image;

if(imageLink.includes(

"drive.google.com"

)){

let fileId=
imageLink.split("/d/")[1]?.split("/")[0];

if(fileId){

imageLink=

"https://drive.google.com/uc?export=view&id="+fileId;

}

}


document.getElementById(

"product"

).innerHTML=`

<div class="card">

<img src="${imageLink}">

<h2>${p.title}</h2>

<h3>‚Çπ${p.price}</h3>


<div class="info">

üìò How Buyer Gets Ebook:

<br><br>

‚úî Click Buy Ebook

<br>

‚úî Pay Using QR Code

<br>

‚úî Upload Screenshot

<br>

‚úî Ebook Unlock üî•

</div>


<button class="buy"

onclick="buyNow('${p._id}')">

Buy Ebook

</button>


<button class="cart"

onclick='addCart(${JSON.stringify(p)})'>

Add To Cart üõí

</button>

</div>

`;

}catch{

document.getElementById(

"product"

).innerHTML=

"‚ùå Product Not Found";

}

}

loadProduct();



// BUY

function buyNow(id){

const token=

localStorage.getItem("token");

if(!token){

alert("Login First üîê");

location.href="login.html";

return;

}


localStorage.setItem(

"buyProduct",

id

);

location.href="payment.html";

}



// CART

function addCart(product){

let cart=

JSON.parse(

localStorage.getItem("cart")

)||[];

cart.push(product);

localStorage.setItem(

"cart",

JSON.stringify(cart)

);

alert("Added To Cart üõí");

}

</script></body></html>
