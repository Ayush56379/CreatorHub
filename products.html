<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>CreatorHub Store</title>

<style>

:root{
--bg:#020617;
--text:#ffffff;
--accent:#22c55e;
}

body{
margin:0;
font-family:Arial;
background:var(--bg);
color:var(--text);
}

/* TOPBAR */

.topbar{
display:flex;
align-items:center;
padding:14px;
background:#020617;
box-shadow:0 5px 20px rgba(0,0,0,.5);
position:sticky;
top:0;
z-index:99;
}

.back{
font-size:22px;
cursor:pointer;
width:40px;
}

.title{
flex:1;
text-align:center;
font-weight:bold;
color:var(--accent);
font-size:18px;
}

/* HEADER */

header{
padding:15px;
display:flex;
justify-content:space-between;
align-items:center;
}

.logo{
font-size:20px;
font-weight:bold;
color:#22c55e;
}

.profile{
width:40px;
height:40px;
border-radius:50%;
border:2px solid #22c55e;
object-fit:cover;
cursor:pointer;
}

/* PRODUCTS GRID */

.products{
padding:20px;
display:grid;
grid-template-columns:
repeat(auto-fit,minmax(230px,1fr));
gap:20px;
}

/* CARD */

.card{
background:#111827;
border-radius:15px;
padding:15px;
box-shadow:0 0 20px rgba(0,0,0,.5);
}

.card img{
width:100%;
height:210px;
object-fit:cover;
border-radius:12px;
cursor:pointer;
}

/* BUTTON */

.buy{
background:linear-gradient(
90deg,#22c55e,#4ade80);
border:none;
width:100%;
padding:13px;
margin-top:10px;
border-radius:10px;
color:white;
font-weight:bold;
cursor:pointer;
}

.cart{
background:black;
color:white;
border:none;
width:100%;
padding:12px;
margin-top:6px;
border-radius:10px;
cursor:pointer;
}

footer{
text-align:center;
padding:30px;
opacity:.7;
}

</style>

</head>

<body>

<!-- TOPBAR -->

<div class="topbar">

<div class="back"
onclick="history.back()">

â¬…

</div>

<div class="title">

CreatorHub

</div>

</div>


<header>

<div class="logo">

ðŸ”¥ CreatorHub Store

</div>

<img id="profile"
class="profile"
onclick="location.href='dashboard.html'">

</header>


<h2 style="padding:15px">

ðŸ“š All Digital Products

</h2>


<div id="products"
class="products">

Loading Products...

</div>


<footer>

CreatorHub Â© 2026

<br>

Digital Products Marketplace

</footer>



<script>

/* â­ FINAL LIVE BACKEND â­ */

const API =
"https://script.google.com/macros/s/AKfycbzgKPuIAmuZWOfilOj8gM9qJcZesz3ECPIhpCvBmupKFY2t76_ObVWyylnoTa4ecyda/exec";


/* USER */

let user =
JSON.parse(localStorage.getItem("user"))
|| {email:"guest"};


/* PROFILE IMAGE */

let profile =
localStorage.getItem(
"profile_"+user.email
);

document.getElementById("profile").src =
profile ||
"https://cdn-icons-png.flaticon.com/512/149/149071.png";


/* GET DATABASE */

async function getDB(db){

try{

const res =
await fetch(
API+"?db="+db+"&t="+Date.now()
);

return await res.json();

}catch(e){

console.log("DB ERROR",e);

return [];

}

}


/* DRIVE IMAGE FIX â­â­â­ */

function getDriveImage(link){

if(!link)
return "https://picsum.photos/400";

try{

let fileId="";

/* uc?id= */

if(link.includes("id=")){

fileId=
link.split("id=")[1]
.split("&")[0];

}

/* /file/d/ */

else if(link.includes("/file/d/")){

fileId=
link.split("/file/d/")[1]
.split("/")[0];

}

if(fileId){

return "https://drive.google.com/thumbnail?id="+fileId+"&sz=w1000";

}

}catch(e){

console.log("Image parse error",e);

}

return "https://picsum.photos/400";

}


/* LOAD PRODUCTS */

async function loadProducts(){

const box =
document.getElementById("products");

try{

let products =
await getDB("products");


if(!Array.isArray(products)
|| products.length===0){

box.innerHTML =
"âŒ No Products Found";

return;

}


/* ONLY APPROVED */

products =
products.filter(
p => p.status==="approved"
);


/* NEW FIRST */

products.reverse();


let html="";


products.forEach(p=>{

let image =
getDriveImage(p.image);


html += `

<div class="card">

<img

src="${image}"

onclick="openProduct('${p.id}')"

onerror="this.src='https://picsum.photos/400'"

>

<h3>${p.title}</h3>

<p>â‚¹ ${p.price}</p>

<button
class="buy"
onclick="buyNow('${p.id}')">

Buy Ebook ðŸš€

</button>

<button
class="cart"
onclick='addCart(${JSON.stringify(p)})'>

Add Cart

</button>

</div>

`;

});


box.innerHTML = html;


}catch(e){

console.log("LOAD ERROR",e);

box.innerHTML =
"âŒ Products Not Loading";

}

}


loadProducts();


/* OPEN PRODUCT */

function openProduct(id){

location.href =
"product.html?id="+id;

}


/* BUY */

function buyNow(id){

localStorage.setItem(
"buyProduct",
id
);

location.href =
"payment.html";

}


/* CART */

function addCart(product){

let cart =
JSON.parse(
localStorage.getItem("cart")
)||[];


if(cart.find(
x=>x.id===product.id)){

alert("Already Added");

return;

}

cart.push(product);

localStorage.setItem(
"cart",
JSON.stringify(cart)
);

alert("Added To Cart âœ…");

}

</script>

</body>

</html>
