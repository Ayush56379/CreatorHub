<!DOCTYPE html>
<html>

<head>

<title>Ebook Detail - CreatorHub</title>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<style>

body{
font-family:Arial;
margin:0;
background:#f2f2f2;
}

/* NAV */

nav{

background:black;
color:white;

padding:15px;

display:flex;

justify-content:space-between;

align-items:center;

}

.backBtn{

cursor:pointer;

color:white;

font-weight:bold;

}

/* CONTAINER */

.container{

padding:20px;

max-width:650px;

margin:auto;

}

/* CARD */

.card{

background:white;

padding:20px;

border-radius:12px;

box-shadow:0 0 12px #ccc;

text-align:center;

}

/* IMAGE */

img{

width:100%;

border-radius:10px;

}

/* BUTTONS */

button{

width:100%;

padding:12px;

margin-top:12px;

border:none;

cursor:pointer;

border-radius:8px;

font-size:16px;

font-weight:bold;

}

.buy{

background:orange;

color:black;

}

.cart{

background:black;

color:white;

}

/* INFO */

.info{

background:#fff3cd;

padding:15px;

border-radius:10px;

margin-top:15px;

text-align:left;

}

</style>

</head>

<body>



<nav>

üî• CreatorHub

<div class="backBtn"

onclick="goBack()">

‚¨Ö Back

</div>

</nav>



<div class="container">

<div id="product">

Loading Product...

</div>

</div>



<script>

const API="https://creatorhub-f2fe.onrender.com/api";


// BACK BUTTON

function goBack(){

history.back();

}


// GET PRODUCT ID

const params=

new URLSearchParams(

location.search

);

const id=params.get("id");

console.log("Product ID:",id);


// ‡§Ö‡§ó‡§∞ ID ‡§®‡§π‡•Ä‡§Ç

if(!id){

document.getElementById("product")

.innerHTML="‚ùå Product ID Missing";

throw "No ID";

}


// LOAD PRODUCT

async function loadProduct(){

try{


// ‚≠ê Direct Product API

const res=

await fetch(

API+"/products/"+id

);


const data=

await res.json();


console.log(data);


// NOT FOUND

if(!data.product){

document.getElementById("product")

.innerHTML=

"‚ùå Product Not Found";

return;

}


const product=data.product;


// SHOW PRODUCT

document.getElementById(

"product"

).innerHTML=`

<div class="card">


<img src="${
product.image ||

'https://picsum.photos/500'
}">


<h2>

${product.title}

</h2>


<h3>

‚Çπ${product.price}

</h3>



<div class="info">

üìò Buyer Process :

<br><br>

‚úî Click Buy Ebook

<br>

‚úî Pay Using QR Code

<br>

‚úî Upload Screenshot

<br>

‚úî Admin Approve

<br>

‚úî Ebook Unlock üî•

</div>


<button class="buy"

onclick="buyNow('${product._id}')">

Buy Ebook

</button>


<button class="cart"

onclick='addCart(${JSON.stringify(product)})'>

Add To Cart

</button>


</div>

`;

}

catch(error){

console.log(error);

document.getElementById("product")

.innerHTML="‚ùå Product Not Found";

}

}

loadProduct();



// BUY

function buyNow(id){

const token=

localStorage.getItem("token");

if(!token){

alert("Login First üîê");

location.href="login.html";

return;

}


// SAVE PRODUCT

localStorage.setItem(

"buyProduct",

id

);


// PAYMENT PAGE

location.href="payment.html";

}



// ADD CART

function addCart(product){

let cart=

JSON.parse(

localStorage.getItem("cart")

)||[];

cart.push(product);

localStorage.setItem(

"cart",

JSON.stringify(cart)

);

alert("Added To Cart üõí");

}

</script>

</body>

</html>
