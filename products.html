<!DOCTYPE html>
<html>

<head>

<title>All Products - CreatorHub</title>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<style>

body{
font-family:Arial;
margin:0;
background:#f2f2f2;
}

nav{
background:black;
color:white;
padding:15px;
display:flex;
justify-content:space-between;
}

nav a{
color:white;
margin-left:15px;
text-decoration:none;
}

.products{
padding:20px;
display:grid;
grid-template-columns:
repeat(auto-fit,minmax(230px,1fr));
gap:20px;
}

.card{
background:white;
padding:15px;
border-radius:10px;
text-align:center;
box-shadow:0 0 10px #ccc;
}

.card img{
width:100%;
border-radius:10px;
cursor:pointer;
}

.buttons{
display:flex;
gap:8px;
justify-content:center;
margin-top:10px;
}

.buy{
background:orange;
border:none;
padding:10px;
cursor:pointer;
flex:1;
font-weight:bold;
}

.cart{
background:black;
color:white;
border:none;
padding:10px;
cursor:pointer;
flex:1;
font-weight:bold;
}

</style>

</head>

<body>


<nav>

üî• CreatorHub

<div>

<a href="index.html">

Home

</a>

<a href="dashboard.html">

Profile

</a>

<a href="cart.html">

üõí Cart

</a>

</div>

</nav>



<h2 style="padding:20px">

üõí All Products

</h2>



<div id="products"

class="products">

Loading...

</div>



<script>

const API=
"https://creatorhub-f2fe.onrender.com/api";



// ‚≠ê LOAD PRODUCTS

async function loadProducts(){

try{

const res=

await fetch(API+"/products");

const data=

await res.json();

let html="";


data.products.forEach(p=>{


html+=`

<div class="card">


<img

src="${p.image ||

'https://picsum.photos/300'}"

onclick="openProduct('${p._id}')"

>


<h3>

${p.title}

</h3>


<p>

‚Çπ${p.price}

</p>



<div class="buttons">


<button class="buy"

onclick="buyNow('${p._id}')">

Buy Ebook

</button>



<button class="cart"

onclick='addCart(${JSON.stringify(p)})'>

Add Cart

</button>


</div>


</div>

`;

});


document.getElementById(

"products"

).innerHTML=

html;

}catch{

document.getElementById(

"products"

).innerHTML=

"Products Not Loading";

}

}

loadProducts();



// ‚≠ê OPEN PRODUCT DETAIL

function openProduct(id){

location.href=

"product.html?id="+id;

}



// ‚≠ê BUY NOW

function buyNow(id){

const token=

localStorage.getItem("token");

if(!token){

alert("Login First üîê");

location.href="login.html";

return;

}


// SAVE PRODUCT

localStorage.setItem(

"buyProduct",

id

);


// PAYMENT PAGE

location.href=

"payment.html";

}



// ‚≠ê ADD CART

function addCart(product){

let cart=

JSON.parse(

localStorage.getItem("cart")

)||[];

cart.push(product);

localStorage.setItem(

"cart",

JSON.stringify(cart)

);

alert("Added To Cart üõí");

}

</script>

</body>

</html>
