<!DOCTYPE html>
<html>

<head>

<title>Upload Payment Proof</title>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<style>

body{

font-family:Arial;
background:#111;
color:white;
text-align:center;

}

.card{

background:#222;
margin:40px auto;
padding:20px;
width:90%;
max-width:350px;
border-radius:12px;

}

input{

margin-top:15px;
width:100%;
padding:12px;
border-radius:6px;
border:none;

}

button{

background:orange;
border:none;
padding:12px;
margin-top:15px;
width:100%;
border-radius:6px;
font-size:16px;
cursor:pointer;

}

button:hover{

background:#ff8800;

}

img{

width:100%;
margin-top:10px;
border-radius:10px;
display:none;

}

.back{

margin-top:15px;
display:block;
color:white;
text-decoration:none;

}

</style>

</head>

<body>


<div class="card">

<h2>

üì∏ Upload Payment Screenshot

</h2>

<p>

Upload Payment Proof After UPI Payment

</p>


<input

type="file"

id="proof"

accept="image/*"

onchange="previewImage()">


<img id="preview">



<button

id="submitBtn"

onclick="unlock()">

Submit Payment ‚úÖ

</button>


<a

href="dashboard.html"

class="back">

‚¨Ö Back Dashboard

</a>


</div>



<script>

const API=
"https://creatorhub-f2fe.onrender.com/api";


// IMAGE PREVIEW

function previewImage(){

const file=

document.getElementById("proof")

.files[0];

const img=

document.getElementById("preview");


if(file){

img.style.display="block";

img.src=

URL.createObjectURL(file);

}else{

img.style.display="none";

}

}



// ‚≠ê SUBMIT PAYMENT

async function unlock(){

const btn=

document.getElementById(

"submitBtn"

);

btn.innerText="Uploading...";


const file=

document.getElementById(

"proof"

).files[0];


if(!file){

alert(

"Upload Screenshot First"

);

btn.innerText="Submit Payment ‚úÖ";

return;

}


// LOGIN CHECK

const token=

localStorage.getItem(

"token"

);

if(!token){

alert(

"Login First üîê"

);

location.href=

"login.html";

return;

}


// PRODUCT CHECK

const product=

localStorage.getItem(

"buyProduct"

);

if(!product){

alert(

"No Product Selected"

);

location.href=

"products.html";

return;

}


try{

const formData=

new FormData();

formData.append(

"proof",

file

);

formData.append(

"product",

product

);


const res=

await fetch(

API+"/orders/proof",

{

method:"POST",

headers:{

Authorization:

"Bearer "+token

},

body:formData

});


const data=

await res.json();


alert(

data.message ||

"Payment Submitted For Approval üî•"

);


location.href=

"dashboard.html";

}catch(error){

alert(

"Upload Failed ‚ùå"

);

}


btn.innerText=

"Submit Payment ‚úÖ";

}

</script>

</body>

</html>
