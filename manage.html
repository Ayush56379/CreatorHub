<script>

document.addEventListener(

"DOMContentLoaded",

()=>{


let user=

JSON.parse(

localStorage.getItem("user")

);

let token=

localStorage.getItem("token");


if(!user||!token){

location.href="login.html";

return;

}


let allProducts=

JSON.parse(

localStorage.getItem("products")

)||[];


// ADMIN EMAIL â­

const admin=

"ayushprajapati6@gmail.com";


let showProducts;


// ADMIN

if(user.email===admin){

showProducts=allProducts;

}


// NORMAL USER

else{

showProducts=

allProducts.filter(

p=>p.owner===user.email

);

}


const box=

document.getElementById("products");

box.innerHTML="";


if(showProducts.length===0){

box.innerHTML="No Uploaded Products ðŸ˜„";

return;

}


showProducts.forEach(p=>{

box.innerHTML+=`

<div class="card">

<img src="${p.image}"

style="width:100%;height:150px;object-fit:cover">

<h3>${p.title}</h3>

â‚¹${p.price}

<br><br>

<button onclick="editProduct(${p.id})">

Edit

</button>

<button onclick="deleteProduct(${p.id})">

Delete

</button>

</div>

`;

});

});



// DELETE

function deleteProduct(id){

let user=

JSON.parse(

localStorage.getItem("user")

);


let products=

JSON.parse(

localStorage.getItem("products")

)||[];


products=

products.filter(p=>{

if(p.id===id){

return false;

}

return true;

});


localStorage.setItem(

"products",

JSON.stringify(products)

);

location.reload();

}



// EDIT

function editProduct(id){

localStorage.setItem(

"editProduct",

id

);

location.href="upload.html";

}

</script>
