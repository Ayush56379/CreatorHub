<!DOCTYPE html>
<html>
<head>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>Manage Products</title>

<style>

body{

font-family:Arial;

background:#111;

color:white;

padding:20px;

}

.back{

background:#2563eb;

border:none;

padding:12px 18px;

color:white;

border-radius:10px;

font-size:16px;

cursor:pointer;

}

.card{

background:#1f2937;

padding:15px;

border-radius:10px;

margin-top:15px;

}

img{

width:100%;

height:200px;

object-fit:cover;

border-radius:10px;

}

.delete{

background:red;

border:none;

color:white;

padding:10px;

width:100%;

margin-top:10px;

border-radius:8px;

cursor:pointer;

}

</style>

</head>

<body>


<button class="back"

onclick="history.back()">

â¬… Back

</button>


<h2>

ðŸ“¦ Manage Products

</h2>


<div id="products">

Loading...

</div>



<script>

const API=

"https://creatorhub-f2fe.onrender.com/api";


// LOAD BOTH â­â­â­

async function loadProducts(){

let box=

document.getElementById(

"products"

);

box.innerHTML="Loading...";

let html="";



// ---------- LOCAL STORAGE ----------

let localProducts=

JSON.parse(

localStorage.getItem("products")

)||[];


// ---------- API PRODUCTS ----------

let apiProducts=[];

try{

let res=

await fetch(API+"/products");

let data=

await res.json();

apiProducts=data.products||[];

}catch(e){

console.log("API OFF");

}



// MERGE BOTH

let all=[

...localProducts,

...apiProducts

];



if(!all.length){

box.innerHTML=

"No Uploaded Products ðŸ˜„";

return;

}



all.forEach(p=>{

html+=`

<div class="card">

<img src="${

p.image ||

'https://via.placeholder.com/400x250?text=No+Cover'

}">


<h3>

${p.title}

</h3>


Price â‚¹${p.price}


${
p.id ?

`<button class="delete"

onclick="deleteLocal('${p.id}')">

Delete

</button>`

:""

}

</div>

`;

});


box.innerHTML=html;

}



loadProducts();



// DELETE LOCAL PRODUCT

function deleteLocal(id){

let products=

JSON.parse(

localStorage.getItem("products")

)||[];


products=

products.filter(

p=>p.id!=id

);


localStorage.setItem(

"products",

JSON.stringify(products)

);


alert("Deleted");

loadProducts();

}

</script>

</body>

</html>
