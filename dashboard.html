<!DOCTYPE html>
<html>

<head>

<title>Creator Dashboard</title>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<style>

body{
margin:0;
font-family:Arial;
background:#111;
color:white;
}

nav{
background:black;
padding:15px;
display:flex;
justify-content:space-between;
}

.container{
padding:20px;
}

.profile{
background:#1c1c1c;
padding:25px;
border-radius:14px;
text-align:center;
}

.profile img{
width:130px;
height:130px;
border-radius:50%;
cursor:pointer;
border:4px solid orange;
object-fit:cover;
}

.stats{

display:grid;

grid-template-columns:
repeat(auto-fit,minmax(150px,1fr));

gap:15px;

margin-top:20px;

}

.box{

background:#222;

padding:20px;

border-radius:10px;

text-align:center;

}

.menu button{

width:100%;

margin-top:10px;

padding:14px;

background:#2a2a2a;

border:none;

color:white;

border-radius:8px;

cursor:pointer;

font-weight:bold;

}

.menu button:hover{

background:orange;

color:black;

}

</style>

</head>

<body>

<nav>

ðŸ”¥ CreatorHub Dashboard

<a href="index.html" style="color:white">

Home

</a>

</nav>


<div class="container">

<div class="profile">

<input type="file"

id="profileUpload"

accept="image/*"

style="display:none"

onchange="uploadProfile(event)">


<img id="profileImg"

onclick="document.getElementById('profileUpload').click()"

src="https://i.pravatar.cc/150">


<h2 id="username">

Loading...

</h2>

</div>


<div class="stats">

<div class="box">

Products

<p id="productCount">0</p>

</div>

<div class="box">

Orders

<p id="orderCount">0</p>

</div>

<div class="box">

Earnings â‚¹

<p id="earnings">0</p>

</div>

</div>


<div class="menu">

<button onclick="go('upload.html')">

Upload Product

</button>

<button onclick="go('orders.html')">

Orders

</button>

<button onclick="go('library.html')">

My Library

</button>

<button onclick="logout()">

Logout

</button>

</div>

</div>



<script>

const API="https://creatorhub-f2fe.onrender.com/api";


// LOGIN SAFE

const token=localStorage.getItem("token");

let user;

try{

user=JSON.parse(localStorage.getItem("user"));

}catch{

localStorage.clear();

location.href="login.html";

}

if(!token || !user){

location.href="login.html";

}


// USER NAME

document.getElementById("username")

.innerText="Welcome "+(user.name||"Creator")+" ðŸ‘‹";


// PROFILE IMAGE

const savedImg=

localStorage.getItem(

"profile_"+user.email

);

if(savedImg){

document.getElementById("profileImg")

.src=savedImg;

}


// PROFILE UPLOAD

function uploadProfile(e){

const file=e.target.files[0];

if(!file)return;

const reader=new FileReader();

reader.onload=function(){

localStorage.setItem(

"profile_"+user.email,

reader.result

);

document.getElementById(

"profileImg"

).src=

reader.result;

};

reader.readAsDataURL(file);

}


// NAV

function go(page){

location.href=page;

}


// STATS

async function loadStats(){

try{

const p=

await fetch(API+"/products");

const pdata=

await p.json();

document.getElementById(

"productCount"

).innerText=

pdata.products?.length||0;



const o=

await fetch(API+"/orders",{

headers:{

Authorization:"Bearer "+token

}

});

const odata=

await o.json();

document.getElementById(

"orderCount"

).innerText=

odata.orders?.length||0;


let total=0;

odata.orders?.forEach(ord=>{

if(ord.product){

total+=ord.product.price||0;

}

});

document.getElementById(

"earnings"

).innerText=total;

}catch(e){

console.log(e);

}

}

loadStats();


// LOGOUT

function logout(){

localStorage.clear();

location.href="login.html";

}

</script>

</body>

</html>
