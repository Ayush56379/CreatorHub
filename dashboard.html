<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CreatorHub Dashboard</title>

<style>

:root{
--bg:#ffffff;
--text:#111827;
--card:#f3f4f6;
--accent:#22c55e;
}

@media (prefers-color-scheme:dark){
:root{
--bg:#020617;
--text:#ffffff;
--card:#111827;
}
}

body{
margin:0;
font-family:Arial;
background:var(--bg);
color:var(--text);
}

/* HEADER */

.topbar{
display:flex;
align-items:center;
padding:14px;
background:var(--bg);
box-shadow:0 4px 15px rgba(0,0,0,.3);
position:sticky;
top:0;
}

.back{
font-size:22px;
cursor:pointer;
width:40px;
}

.title{
flex:1;
text-align:center;
font-weight:bold;
color:#22c55e;
}

/* HEADER 2 */

.header{
display:flex;
justify-content:space-between;
align-items:center;
background:#000;
padding:15px;
box-shadow:0 5px 20px black;
color:white;
}

.profile{
width:45px;
height:45px;
border-radius:50%;
object-fit:cover;
border:2px solid #22c55e;
cursor:pointer;
}

/* HOME BUTTON */

.homeBtn{
margin-left:10px;
padding:6px 12px;
border:none;
border-radius:8px;
background:#22c55e;
color:white;
cursor:pointer;
font-size:13px;
}

/* USER TOP */

.top{
text-align:center;
padding:30px;
background:linear-gradient(90deg,#2563eb,#22c55e);
border-radius:0 0 25px 25px;
color:white;
}

.name{
font-size:22px;
font-weight:bold;
}

.email{
opacity:.9;
}

/* GRID */

.container{
padding:20px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
gap:15px;
}

.card{
background:#111827;
padding:18px;
border-radius:15px;
cursor:pointer;
transition:.3s;
color:white;
box-shadow:0 0 20px rgba(0,0,0,.6);
}

.card:hover{
transform:translateY(-5px);
}

.logout{
margin:20px;
}

.logout button{
width:100%;
padding:12px;
border:none;
border-radius:10px;
background:red;
color:white;
font-weight:bold;
cursor:pointer;
}

</style>

</head>

<body>

<!-- TOPBAR -->

<div class="topbar">

<!-- ‚úÖ FIXED BACK BUTTON -->

<div class="back"
onclick="location.href='index.html'">

‚¨Ö

</div>

<div class="title">

CreatorHub

</div>

<button class="homeBtn"

onclick="location.href='index.html'">

üè† Home

</button>

</div>


<div class="header">

üî• CreatorHub Dashboard

<img id="profile"

class="profile"

onclick="uploadProfile()">

</div>



<div class="top">

<div id="name"

class="name">

User

</div>

<div id="email"

class="email">

email

</div>

</div>



<div class="container">

<div class="card"

onclick="go('products.html')">

üõí Browse Products

</div>

<div class="card"

onclick="go('library.html')">

üìö My Library

</div>

<div class="card"

onclick="go('orders.html')">

üí≥ Orders

</div>

<div class="card"

onclick="go('wallet.html')">

üí∞ Wallet

</div>

<div class="card"

onclick="go('upload.html')">

üìò Upload Ebook

</div>

<div class="card"

onclick="applySeller()">

‚≠ê Become Seller

</div>

<div id="adminBox"

class="card"

style="display:none"

onclick="go('admin.html')">

üëë Admin Panel

</div>

</div>



<div class="logout">

<button onclick="logout()">

Logout

</button>

</div>



<input type="file"

id="profileUpload"

accept="image/*"

style="display:none">



<script>


const API=

"https://script.google.com/macros/s/AKfycbw7xwjcEGIdj3xS8q7qhRNCSbch2uVsXFGFJYWgMNU4UPA-2BSfhq79PHsQ_oCEeYTm/exec";



let user=

JSON.parse(localStorage.getItem("user"));


// ‚úÖ SAFE LOGIN CHECK

if(!user || !user.email){

location.href="login.html";

}


document.getElementById("name").innerText=

user.name || "User";


document.getElementById("email").innerText=

user.email;



document.getElementById("profile").src=

localStorage.getItem("profile_"+user.email)

||

"https://cdn-icons-png.flaticon.com/512/149/149071.png";



function go(page){

location.href=page;

}


/* DATABASE */


async function getDB(db){

let res=

await fetch(API+"?db="+db+"&t="+Date.now());

let data=

await res.json();

return Array.isArray(data)?data:[];

}



async function saveDB(db,data){

await fetch(API,{

method:"POST",

headers:{

"Content-Type":"application/json"

},

body:

JSON.stringify({db,data})

});

}



/* LOAD USER */


async function loadUser(){

let users=

await getDB("users");


let index=

users.findIndex(

u=>u.email===user.email

);


if(index===-1){

users.push({

email:user.email,

name:user.name,

seller:false,

banned:false,

created:new Date()

.toLocaleString()

});


await saveDB("users",users);

}


// ADMIN SHOW

if(

user.email==="ayushprajpati6@gmail.com"

){

document

.getElementById("adminBox")

.style.display="block";

}

}


loadUser();



/* SELLER */


async function applySeller(){

let users=

await getDB("users");


let index=

users.findIndex(

u=>u.email===user.email

);


if(index===-1){

users.push({

email:user.email,

name:user.name,

seller:true,

banned:false,

created:new Date()

.toLocaleString()

});

}

else{

if(users[index].seller){

alert("Already Seller üòé");

return;

}

users[index].seller=true;

}


await saveDB("users",users);

alert("Seller Activated üöÄ");

}



/* PROFILE UPLOAD */


function uploadProfile(){

document

.getElementById("profileUpload")

.click();

}


document

.getElementById("profileUpload")

.addEventListener(

"change",

async function(e){

let file=e.target.files[0];

if(!file)return;


if(file.size>

2*1024*1024){

alert("Max 2MB Image");

return;

}


let reader=new FileReader();


reader.onload=

async function(){

let image=

reader.result;


let profiles=

await getDB("profiles");


let index=

profiles.findIndex(

p=>p.email===user.email

);


if(index===-1){

profiles.push({

email:user.email,

image:image

});

}

else{

profiles[index]

.image=image;

}


await saveDB(

"profiles",

profiles

);


localStorage

.setItem(

"profile_"+user.email,

image

);


document

.getElementById("profile")

.src=image;


alert("Profile Updated ‚úÖ");

};


reader.readAsDataURL(file);

});



/* LOGOUT */


function logout(){

localStorage

.removeItem("user");

location.href="login.html";

}

</script>

</body>

</html>
