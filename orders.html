<!DOCTYPE html>
<html>

<head>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>My Orders - CreatorHub</title>

<style>

body{

margin:0;

font-family:Arial;

background:

linear-gradient(

180deg,

#020617,

#111827

);

color:white;

}


/* HEADER */

.header{

background:#000;

padding:15px;

display:flex;

justify-content:space-between;

align-items:center;

}


.back{

background:#2563eb;

padding:10px 16px;

border-radius:10px;

cursor:pointer;

}


.dashboard{

background:#f59e0b;

padding:10px 16px;

border-radius:10px;

color:white;

text-decoration:none;

}


/* CONTAINER */

.container{

padding:15px;

}


/* CARD */

.card{

background:

rgba(31,41,55,.95);

padding:15px;

border-radius:16px;

margin-bottom:15px;

display:flex;

gap:12px;

align-items:center;

box-shadow:

0 10px 25px rgba(0,0,0,.5);

}


/* IMAGE */

.cover{

width:90px;

height:120px;

border-radius:10px;

object-fit:cover;

}


/* TEXT */

.info{

flex:1;

}


.title{

font-size:17px;

font-weight:bold;

margin-bottom:6px;

}


.price{

color:#22c55e;

font-weight:bold;

margin-bottom:5px;

}


.download{

background:

linear-gradient(

90deg,

#22c55e,

#4ade80

);

border:none;

padding:8px 14px;

border-radius:8px;

cursor:pointer;

margin-top:6px;

}

.empty{

text-align:center;

opacity:.8;

margin-top:40px;

}

</style>

</head>

<body>


<div class="header">

<div class="back"

onclick="history.back()">

‚¨Ö Back

</div>

<h3>

üì¶ My Orders

</h3>

<a class="dashboard"

href="./dashboard.html">

Dashboard

</a>

</div>


<div class="container">

<div id="orders">

Loading...

</div>

</div>



<script>


// ‚≠ê GOOGLE DRIVE API

const API=

"https://script.google.com/macros/s/AKfycbz_5CJPDBUTQgVEGaFcmQYQ9DK70CxVvvvS9CyVtxKvQC-SUI0RRQzMEsGMIdK_DMok/exec";




// LOGIN CHECK

let user=

JSON.parse(

localStorage.getItem("user")

);


if(!user){

alert("Login First");

location.href="login.html";

}




async function getDB(db){

const res=

await fetch(

API+"?db="+db

);

return await res.json();

}



// DOWNLOAD PDF

function openPDF(url){

window.open(

url,

"_blank"

);

}




// LOAD ORDERS

async function loadOrders(){


try{


let orders=

await getDB("orders");


let myOrders=

orders.filter(o=>

o.user===user.email

);


const box=

document.getElementById(

"orders"

);


if(!myOrders.length){

box.innerHTML=

'<div class="empty">No Orders Yet üòÑ</div>';

return;

}


box.innerHTML="";



myOrders.reverse()

.forEach(o=>{


box.innerHTML+=`

<div class="card">


<img

class="cover"

src="${o.image ||

'https://picsum.photos/200'}"

onerror="this.src='https://picsum.photos/200'"

>


<div class="info">


<div class="title">

${o.name||o.title}

</div>


<div class="price">

‚Çπ ${o.price}

</div>


<div>

Date :

${o.date ||

new Date()

.toLocaleDateString()

}

</div>


<button

class="download"

onclick="openPDF('${o.pdf||''}')">

Download Ebook üìò

</button>


</div>


</div>

`;


});


}catch(e){


console.log(e);


document.getElementById(

"orders"

).innerHTML=

"‚ùå Orders Not Loading";


}


}


loadOrders();


</script>

</body>

</html>
