<!DOCTYPE html>
<html>

<head>

<meta charset="UTF-8">

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>My Orders - CreatorHub</title>

<style>

body{

margin:0;

font-family:Arial;

background:#020617;

color:white;

}

/* HEADER */

.header{

display:flex;

justify-content:space-between;

align-items:center;

background:#020617;

padding:15px;

box-shadow:0 5px 20px rgba(0,0,0,.6);

}

.back{

background:#2563eb;

padding:10px 16px;

border-radius:10px;

cursor:pointer;

}

.dashboard{

background:#22c55e;

padding:10px 16px;

border-radius:10px;

color:white;

text-decoration:none;

}

.container{

padding:20px;

}

/* CARD */

.card{

background:#111827;

padding:15px;

border-radius:15px;

margin-bottom:15px;

display:flex;

gap:15px;

align-items:center;

box-shadow:

0 0 20px rgba(0,0,0,.5);

}

.card img{

width:90px;

height:110px;

object-fit:cover;

border-radius:10px;

}


/* DETAILS */

.details{

flex:1;

}

.title{

font-size:18px;

font-weight:bold;

margin-bottom:5px;

}

.price{

color:#22c55e;

margin-bottom:5px;

}


/* BUTTON */

.download{

background:

linear-gradient(

90deg,#22c55e,#4ade80

);

border:none;

padding:10px;

border-radius:10px;

cursor:pointer;

color:white;

font-weight:bold;

}

.empty{

text-align:center;

opacity:.7;

margin-top:40px;

}

</style>

</head>

<body>


<!-- HEADER -->

<div class="header">

<div class="back"

onclick="history.back()">

‚¨Ö Back

</div>


<div>

üìö My Orders

</div>


<a class="dashboard"

href="dashboard.html">

Dashboard

</a>

</div>



<div class="container">

<div id="orders">

Loading Orders...

</div>

</div>



<script>


// ‚≠ê GOOGLE DRIVE API ‚≠ê

const API=

"https://script.google.com/macros/s/AKfycbw7xwjcEGIdj3xS8q7qhRNCSbch2uVsXFGFJYWgMNU4UPA-2BSfhq79PHsQ_oCEeYTm/exec";



// LOGIN CHECK ‚≠ê‚≠ê‚≠ê

let user=

JSON.parse(

localStorage.getItem("user")

);


if(!user){

alert("Login First");

location.href="login.html";

}



// DRIVE LOAD

async function getDB(db){

const res=

await fetch(

API+"?db="+db

);

return await res.json();

}



// LOAD ORDERS ‚≠ê‚≠ê‚≠ê FINAL

async function loadOrders(){

try{


let orders=

await getDB("orders");


const box=

document.getElementById(

"orders"

);


// FILTER USER ORDER

let myOrders=

orders.filter(

o=>o.user===user.email

);


if(!myOrders.length){

box.innerHTML=

"<div class='empty'>üòÑ No Orders Yet</div>";

return;

}


box.innerHTML="";


// SHOW NEW FIRST

myOrders.reverse()

.forEach(o=>{


let image=

o.image ||

"https://picsum.photos/200";


let pdf=

o.pdf || "#";


box.innerHTML+=`

<div class="card">


<img

src="${image}"

onerror="this.src='https://picsum.photos/200'"

>


<div class="details">


<div class="title">

${o.title || o.name}

</div>


<div class="price">

‚Çπ ${o.price}

</div>


<div>

Date :

${o.date ||

new Date().toLocaleDateString()

}

</div>


<br>


<button

class="download"

onclick="openPDF('${pdf}')">

Download PDF üì•

</button>


</div>


</div>

`;

});


}catch(e){

console.log(e);

document.getElementById(

"orders"

).innerHTML=

"‚ùå Orders Not Loading";

}

}


loadOrders();




// OPEN PDF ‚≠ê‚≠ê‚≠ê

function openPDF(link){

if(!link ||

link=="#"){

alert("PDF Not Available");

return;

}


window.open(link,"_blank");

}


</script>

</body>

</html>
