<!DOCTYPE html>
<html>

<head>

<title>Admin Panel</title>

</head>

<body>

<h1>

ðŸ”¥ CreatorHub Admin Panel

</h1>


<h3>

Upload Product

</h3>


<input id="title"
placeholder="Product Title">

<br><br>

<input id="price"
placeholder="Price">

<br><br>

<textarea id="description"
placeholder="Description">

</textarea>

<br><br>

<button onclick="uploadProduct()">

Upload Product

</button>


<hr>


<h3>

ðŸ“¦ All Products

</h3>


<div id="products">

Loading...

</div>


<script>

const API =
"https://creatorhub-f2fe.onrender.com/api";

const token =
localStorage.getItem("token");


// LOGIN CHECK

if(!token){

alert("Login First");

window.location.href="login.html";

}



// ================= UPLOAD PRODUCT =================

async function uploadProduct(){

const title =
document.getElementById("title").value;

const price =
document.getElementById("price").value;

const description =
document.getElementById("description").value;


const res =
await fetch(

API+"/admin/upload",

{

method:"POST",

headers:{

"Content-Type":"application/json",

Authorization:
"Bearer "+token

},

body:JSON.stringify({

title,
price,
description

})

}

);

const data =
await res.json();

alert(data.message);

loadProducts();

}



// ================= LOAD PRODUCTS =================

async function loadProducts(){

const res =
await fetch(

API+"/admin/products",

{

headers:{

Authorization:

"Bearer "+token

}

}

);

const data =
await res.json();

let html="";

data.products.forEach(p=>{

html+=`

<div style="border:1px solid black;
margin:10px;
padding:10px;">

<h3>

${p.title}

</h3>

<p>

â‚¹ ${p.price}

</p>

<button onclick="deleteProduct('${p._id}')">

Delete

</button>

</div>

`;

});

document.getElementById(

"products"

).innerHTML=html;

}



// ================= DELETE PRODUCT =================

async function deleteProduct(id){

await fetch(

API+"/admin/product/"+id,

{

method:"DELETE",

headers:{

Authorization:

"Bearer "+token

}

}

);

alert("Deleted");

loadProducts();

}


loadProducts();

</script>

</body>

</html>
