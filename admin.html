<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>CreatorHub SUPER ADMIN</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{
margin:0;
font-family:Arial;
background:#020617;
color:white;
}

.topbar{
display:flex;
align-items:center;
padding:14px;
background:#020617;
box-shadow:0 5px 20px black;
}

.back{
font-size:22px;
cursor:pointer;
width:40px;
}

.title{
flex:1;
text-align:center;
color:#22c55e;
font-weight:bold;
}

.container{
max-width:1100px;
margin:auto;
padding:20px;
}

.card{
background:#111827;
padding:20px;
border-radius:15px;
margin-bottom:20px;
}

.big{
font-size:30px;
color:#22c55e;
}

button{
border:none;
padding:12px;
margin-top:10px;
border-radius:10px;
cursor:pointer;
font-weight:bold;
color:white;
}

.open{
background:#22c55e;
width:100%;
}

.approve{
background:#22c55e;
}

.reject{
background:red;
margin-left:10px;
}

.row{

background:#020617;
padding:15px;
border-radius:10px;
margin-top:10px;

}

canvas{
background:#020617;
border-radius:10px;
padding:10px;
}

</style>

</head>

<body>

<div class="topbar">

<!-- âœ… BACK DASHBOARD -->

<div class="back"
onclick="location.href='dashboard.html'">

â¬…

</div>

<div class="title">

ğŸ”¥ CreatorHub SUPER ADMIN PANEL

</div>

</div>


<div class="container">


<!-- OWNER PROFIT -->

<div class="card">

<h2>ğŸ’° Owner Profit</h2>

â‚¹ <span id="profit" class="big">0</span>

</div>



<!-- ANALYTICS -->

<div class="card">

<h2>ğŸ“Š Earnings Analytics</h2>

<canvas id="chart"></canvas>

</div>



<!-- â­ SELLER APPROVAL PANEL -->

<div class="card">

<h2>â­ Seller Approval Requests</h2>

<div id="sellerList">

Loading...

</div>

</div>



<!-- PRODUCT CONTROL -->

<div class="card">

<h2>ğŸ“¦ Product Control</h2>

<button class="open"

onclick="location.href='product-control.html'">

Open Product Control Panel

</button>

</div>



<!-- SELLER CONTROL -->

<div class="card">

<h2>ğŸš« Seller Control</h2>

<button class="open"

onclick="location.href='seller-control.html'">

Open Seller Control

</button>

</div>



<!-- WALLET -->

<div class="card">

<h2>ğŸ‘¤ USER WALLET BALANCE</h2>

<button class="open"

onclick="location.href='wallet-balance.html'">

Open Wallet Balance Panel

</button>

</div>



<!-- WITHDRAW -->

<div class="card">

<h2>ğŸ¦ Withdraw Requests</h2>

<button class="open"

onclick="location.href='withdraw-control.html'">

Open Withdraw Requests

</button>

</div>



<!-- USER ANALYTICS -->

<div class="card">

<h2>ğŸ“Š User Activity Analytics</h2>

<button class="open"

onclick="location.href='user-analytics.html'">

Open User Analytics

</button>

</div>

</div>


<script>

const ADMIN="ayushprajpati6@gmail.com";

const API="https://script.google.com/macros/s/AKfycbzgKPuIAmuZWOfilOj8gM9qJcZesz3ECPIhpCvBmupKFY2t76_ObVWyylnoTa4ecyda/exec";

let user=JSON.parse(localStorage.getItem("user"));

if(!user || user.email!==ADMIN){

alert("Admin Only");

location.href="index.html";

}


/* DATABASE */

async function getDB(db){

try{

let r=
await fetch(API+"?db="+db+"&t="+Date.now());

let d=await r.json();

return Array.isArray(d)?d:[];

}catch(e){

console.log(e);

return [];

}

}


async function saveDB(db,data){

await fetch(API,{

method:"POST",

headers:{

"Content-Type":"text/plain"

},

body:JSON.stringify({

db:db,

data:data

})

});

}


/* OWNER PROFIT */

async function loadProfit(){

let orders=await getDB("orders");

let total=0;

orders.forEach(o=>{

total+=Number(o.amount||0)*0.20;

});

document.getElementById("profit").innerText=Math.floor(total);


new Chart(

document.getElementById("chart"),

{

type:"line",

data:{

labels:

orders.map((_,i)=>"Order "+(i+1)),

datasets:[{

label:"Owner Profit",

data:

orders.map(o=>(o.amount||0)*0.20),

borderColor:"#22c55e",

tension:.4

}]

}

});

}

loadProfit();



/* â­ SELLER REQUEST LOAD */

async function loadSellerRequests(){

let users=await getDB("users");

let box=document.getElementById("sellerList");

box.innerHTML="";


let pending=

users.filter(

u=>u.sellerRequest===true

&& !u.seller

);


if(pending.length===0){

box.innerHTML="No Seller Requests";

return;

}


pending.forEach(u=>{

box.innerHTML+=`

<div class="row">

<b>${u.name||"User"}</b>

<br>

${u.email}

<br>

<button class="approve"

onclick="approveSeller('${u.email}')">

Approve âœ…

</button>

<button class="reject"

onclick="rejectSeller('${u.email}')">

Reject âŒ

</button>

</div>

`;

});

}

loadSellerRequests();



/* APPROVE */

async function approveSeller(email){

let users=await getDB("users");

let index=users.findIndex(

u=>u.email===email

);

if(index>-1){

users[index].seller=true;

users[index].sellerRequest=false;

}

await saveDB("users",users);

alert("Seller Approved âœ…");

loadSellerRequests();

}


/* REJECT */

async function rejectSeller(email){

let users=await getDB("users");

let index=users.findIndex(

u=>u.email===email

);

if(index>-1){

users[index].sellerRequest=false;

}

await saveDB("users",users);

alert("Rejected âŒ");

loadSellerRequests();

}

</script>

</body>
</html>
