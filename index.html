<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>CreatorHub Marketplace</title>

<style>

/* FIX LEFT CUT ISSUE */

html,body{
margin:0;
padding:0;
width:100%;
overflow-x:hidden;
font-family:Arial;
background:#020617;
color:white;
}

/* HEADER */

header{
display:flex;
align-items:center;
padding:14px;
background:#020617;
box-shadow:0 5px 20px black;
position:sticky;
top:0;
z-index:999;
}

.menu{
font-size:26px;
cursor:pointer;
width:40px;
}

.title{
flex:1;
text-align:center;
font-size:22px;
font-weight:bold;
color:#22c55e;
}

.profile{
width:42px;
height:42px;
border-radius:50%;
border:2px solid #22c55e;
object-fit:cover;
cursor:pointer;
}

/* SIDE MENU */

.side{
position:fixed;
top:0;
left:0;
width:240px;
height:100%;
background:#020617;
padding:20px;
transform:translateX(-100%);
transition:.3s ease;
box-shadow:5px 0 20px black;
z-index:9999;
}

.side.open{
transform:translateX(0);
}

.close{
background:#ef4444;
padding:10px;
border-radius:10px;
text-align:center;
cursor:pointer;
margin-bottom:20px;
}

.side a{
display:block;
background:#111827;
padding:12px;
margin-top:10px;
border-radius:10px;
text-decoration:none;
color:white;
}

/* OVERLAY */

#overlay{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,.6);
display:none;
z-index:9998;
}

/* SEARCH */

.search{
padding:15px;
}

.search input{
width:100%;
padding:14px;
border-radius:40px;
border:none;
background:#111827;
color:white;
font-size:15px;
}

/* HERO */

.hero{
height:230px;
width:100%;
background:url("https://images.unsplash.com/photo-1512820790803-83ca734da794") center/cover;
display:flex;
align-items:center;
justify-content:center;
font-size:28px;
font-weight:bold;
text-align:center;
}

/* CATEGORY */

.category{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
gap:15px;
padding:15px;
}

.cat{
background:#111827;
padding:20px;
border-radius:14px;
text-align:center;
box-shadow:0 10px 20px black;
}

/* PRODUCTS */

.products{
padding:15px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
gap:18px;
}

.card{
background:#111827;
padding:14px;
border-radius:14px;
box-shadow:0 10px 25px black;
}

.card img{
width:100%;
height:210px;
object-fit:cover;
border-radius:12px;
}

.rating{
color:gold;
margin-top:6px;
}

.seller{
display:flex;
align-items:center;
gap:8px;
font-size:13px;
margin-top:6px;
}

.seller img{
width:24px;
height:24px;
border-radius:50%;
border:1px solid #22c55e;
}

.buy{
width:100%;
padding:12px;
margin-top:8px;
border:none;
background:linear-gradient(90deg,#22c55e,#4ade80);
border-radius:10px;
color:white;
font-weight:bold;
cursor:pointer;
}

.badge{
background:#22c55e;
padding:4px 8px;
font-size:11px;
border-radius:6px;
margin-left:6px;
}

/* FOOTER */

footer{
background:black;
padding:30px;
text-align:center;
line-height:26px;
}

footer a{
color:#22c55e;
margin:0 6px;
text-decoration:none;
}

</style>

</head>

<body>

<div id="menu" class="side">
<div class="close" onclick="closeMenu()">‚¨Ö Back</div>
<a href="dashboard.html">Dashboard</a>
<a href="upload.html">Upload Ebook</a>
<a href="wallet.html">Wallet</a>
<a href="orders.html">Orders</a>
</div>

<div id="overlay" onclick="closeMenu()"></div>

<header>
<div class="menu" onclick="openMenu()">‚ò∞</div>
<div class="title">CreatorHub</div>
<img id="profile" class="profile" onclick="location.href='dashboard.html'">
</header>

<div class="search">
<input placeholder="Search Ebook..." oninput="searchProduct(this.value)">
</div>

<div class="hero">
Digital Ebook Marketplace
</div>

<div class="category">
<div class="cat">üìö Business</div>
<div class="cat">üíª Coding</div>
<div class="cat">üìà Marketing</div>
<div class="cat">üé® Design</div>
</div>

<div id="products" class="products">
Loading Products...
</div>

<footer>
<h2>CreatorHub Policies</h2>
Admin Commission 20%. Seller Earnings 80%. Digital Products Only.
<br><br>
<a href="about.html">About</a> |
<a href="privacy.html">Privacy</a> |
<a href="disclaimer.html">Disclaimer</a> |
<a href="contact.html">Contact</a> |
<a href="rules.html">Rules</a>
<br><br>
¬© 2026 CreatorHub Marketplace
</footer>

<script>

const API="https://script.google.com/macros/s/AKfycbw7xwjcEGIdj3xS8q7qhRNCSbch2uVsXFGFJYWgMNU4UPA-2BSfhq79PHsQ_oCEeYTm/exec";

const menu=document.getElementById("menu");
const overlay=document.getElementById("overlay");
const products=document.getElementById("products");

function openMenu(){
menu.classList.add("open");
overlay.style.display="block";
document.body.style.overflow="hidden";
}

function closeMenu(){
menu.classList.remove("open");
overlay.style.display="none";
document.body.style.overflow="auto";
}

let user=JSON.parse(localStorage.getItem("user"))||{email:"guest"};
let profile=localStorage.getItem("profile_"+user.email)||"https://cdn-icons-png.flaticon.com/512/149/149071.png";
document.getElementById("profile").src=profile;

async function getDB(db){
const res=await fetch(API+"?db="+db);
return await res.json();
}

let allProducts=[];

async function loadProducts(){
try{
allProducts=await getDB("products");
allProducts.forEach(p=>{
p.rating=(Math.random()*1+4).toFixed(1);
});
allProducts.sort((a,b)=>b.rating-a.rating);
showProducts(allProducts);
}catch{
products.innerHTML="No Products";
}
}

loadProducts();

function showProducts(list){
let html="";
list.forEach(p=>{
let sellerImg=localStorage.getItem("profile_"+p.owner)||"https://cdn-icons-png.flaticon.com/512/149/149071.png";
html+=`
<div class="card">
<img src="${p.image}">
<h3>${p.title}<span class="badge">Verified</span></h3>
‚Çπ ${p.price}
<div class="rating">‚≠ê ${p.rating}/5</div>
<div class="seller">
<img src="${sellerImg}">
${p.owner}
</div>
<button class="buy" onclick="buyNow('${p.id}')">Buy Ebook</button>
</div>
`;
});
products.innerHTML=html||"No Products";
}

function searchProduct(q){
q=q.toLowerCase();
showProducts(allProducts.filter(p=>p.title.toLowerCase().includes(q)));
}

function buyNow(id){
localStorage.setItem("buyProduct",id);
location.href="payment.html";
}

</script>

</body>
</html>
