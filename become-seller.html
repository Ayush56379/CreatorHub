<script>

const API =
"https://script.google.com/macros/s/AKfycbw7xwjcEGIdj3xS8q7qhRNCSbch2uVsXFGFJYWgMNU4UPA-2BSfhq79PHsQ_oCEeYTm/exec";

let user =
JSON.parse(localStorage.getItem("user"));

if(!user){

alert("Login First");

location.href="login.html";

}


// DRIVE LOAD

async function getDB(db){

const res =
await fetch(API+"?db="+db);

return await res.json();

}


// DRIVE SAVE

async function saveDB(db,data){

await fetch(API,{

method:"POST",

body:JSON.stringify({

db:db,

data:data

})

});

}


// APPLY SELLER ‚≠ê‚≠ê‚≠ê

async function applySeller(){

let users =
await getDB("users");


// USER FIND

let index =
users.findIndex(
u=>u.email===user.email
);


// ‚≠ê USER NOT FOUND FIX ‚≠ê

if(index===-1){

users.push({

email:user.email,

role:"seller",

created:new Date().toLocaleString()

});

}else{

users[index].role="seller";

}


// SAVE DRIVE

await saveDB("users",users);


// LOCAL UPDATE

user.role="seller";

localStorage.setItem(

"user",

JSON.stringify(user)

);


alert("üéâ Seller Activated Successfully");

location.href="dashboard.html";

}

</script>
