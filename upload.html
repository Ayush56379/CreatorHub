<!DOCTYPE html>
<html>
<head>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>Upload Ebook</title>

<style>

body{
background:#111;
font-family:Arial;
color:white;
padding:20px;
}

.container{

background:#1f2937;
padding:20px;
border-radius:12px;

}

input{

width:100%;
padding:12px;
margin-top:10px;
border:none;
border-radius:8px;

}

button{

width:100%;
margin-top:15px;
padding:14px;
background:orange;
border:none;
border-radius:8px;
font-size:16px;
cursor:pointer;

}

.back{

background:#2563eb;
width:auto;
padding:10px 15px;
margin-bottom:10px;

}

</style>

</head>

<body>

<button class="back"
onclick="history.back()">

â¬… Back

</button>


<div class="container">

<h2>ðŸ“˜ Upload Ebook</h2>

<input id="title"
placeholder="Ebook Title">

<input id="price"
placeholder="Price">

<input id="pdf"
placeholder="Google Drive PDF Link">

<br><br>

<label>

Choose Cover Image

</label>

<input type="file"
id="image">

<button onclick="uploadEbook()">

Upload Ebook ðŸš€

</button>

<p id="status">

</p>

</div>


<script>

const API="https://creatorhub-f2fe.onrender.com/api";


// YOUR CLOUDINARY DETAILS

const CLOUD_NAME="difuuazwn";

const UPLOAD_PRESET="creatorhub";


// MAIN UPLOAD

async function uploadEbook(){

const title=
document.getElementById("title").value;

const price=
document.getElementById("price").value;

const pdf=
document.getElementById("pdf").value;

const file=
document.getElementById("image").files[0];


if(!title || !price || !pdf || !file){

alert("Fill All Fields");

return;

}


document.getElementById("status")
.innerText="Uploading Image...";


try{


// CLOUDINARY IMAGE UPLOAD

let formData=new FormData();

formData.append("file",file);

formData.append(

"upload_preset",

UPLOAD_PRESET

);


const imgUpload=

await fetch(

`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,

{

method:"POST",

body:formData

}

);


const imgData=

await imgUpload.json();


if(!imgData.secure_url){

alert("Image Upload Failed");

return;

}


const imageLink=

imgData.secure_url;


document.getElementById("status")

.innerText="Saving Ebook...";



// SAVE PRODUCT API

await fetch(

API+"/products",

{

method:"POST",

headers:{

"Content-Type":

"application/json"

},

body:JSON.stringify({

title:title,

price:Number(price),

image:imageLink,

pdf:pdf

})

}

);


alert("Ebook Uploaded Successfully ðŸ”¥");


location.href="dashboard.html";


}

catch(e){

console.log(e);

alert("Upload Failed");

}

}

</script>

</body>

</html>
