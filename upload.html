<!DOCTYPE html>
<html>

<head>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>Upload Ebook</title>

<style>

body{
background:#111;
color:white;
font-family:Arial;
padding:20px;
}

.card{
background:#1f2937;
padding:20px;
border-radius:12px;
max-width:500px;
margin:auto;
}

input{
width:100%;
padding:13px;
margin-top:12px;
border:none;
border-radius:8px;
}

button{
width:100%;
padding:15px;
margin-top:15px;
background:orange;
border:none;
border-radius:10px;
font-weight:bold;
cursor:pointer;
}

.back{
background:#2563eb;
padding:10px 15px;
border-radius:8px;
display:inline-block;
margin-bottom:15px;
cursor:pointer;
}

.preview{
width:100%;
margin-top:10px;
border-radius:10px;
display:none;
}

</style>

</head>

<body>

<div class="back"
onclick="history.back()">

‚¨Ö Back

</div>


<div class="card">

<h2>
üìò Upload Ebook
</h2>

<input id="title"
placeholder="Ebook Title">

<input id="price"
placeholder="Price ‚Çπ">

<h4>Choose Cover Image</h4>

<input type="file"
id="imageFile"
accept="image/*"
onchange="previewImage(event)">

<img id="preview"
class="preview">

<h4>Select PDF</h4>

<input type="file"
id="pdfFile"
accept="application/pdf"
onchange="previewPDF(event)">

<button onclick="uploadBook()">
Upload Ebook üöÄ
</button>

</div>


<script>


// ‚≠ê‚≠ê‚≠ê GOOGLE DRIVE API ‚≠ê‚≠ê‚≠ê

const DRIVE_API =
"https://script.google.com/macros/s/AKfycbzG2oS5w1tQN_pVMFzhd-U3nJVsovuTg49LrCFYgicbQCtv47KgwTIF5SPLC2N09Z9V/exec";


let imageBase64="";
let pdfBase64="";


// IMAGE PREVIEW

function previewImage(e){

const file=e.target.files[0];

if(!file)return;

const reader=new FileReader();

reader.onload=function(){

imageBase64=reader.result;

const p=document.getElementById("preview");

p.src=imageBase64;

p.style.display="block";

};

reader.readAsDataURL(file);

}



// PDF LOAD

function previewPDF(e){

const file=e.target.files[0];

if(!file)return;

const reader=new FileReader();

reader.onload=function(){

pdfBase64=reader.result;

};

reader.readAsDataURL(file);

}



// UPLOAD

async function uploadBook(){

let title=
document.getElementById("title").value.trim();

let price=
document.getElementById("price").value.trim();


if(!title||!price||
!imageBase64||!pdfBase64){

alert("Fill all fields");

return;

}


alert("Uploading to Google Drive...");


try{


const res=await fetch(
DRIVE_API,
{

method:"POST",

body:JSON.stringify({

title:title,

image:imageBase64,

pdf:pdfBase64

})

});

const data=await res.json();


if(!data.success){

alert("Upload Failed");

return;

}


// ‚≠ê SAVE PRODUCT ‚≠ê

let products=
JSON.parse(
localStorage.getItem("products")
)||[];


products.push({

id:Date.now(),

title:title,

price:price,

image:data.image,

pdf:data.pdf

});


localStorage.setItem(
"products",
JSON.stringify(products)
);


alert("Upload Successful ‚úÖ");


location.href="products.html";


}catch(e){

alert("Error Uploading");

console.log(e);

}

}


</script>

</body>

</html>
