<!DOCTYPE html>
<html>
<head>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>Upload Ebook</title>

<style>

body{

background:#111;
color:white;
font-family:Arial;
padding:20px;

}

.box{

background:#1f2937;
padding:20px;
border-radius:12px;

}

input{

width:100%;
padding:12px;
margin-top:10px;
border:none;
border-radius:8px;

}

button{

width:100%;
padding:14px;
margin-top:15px;
background:orange;
border:none;
border-radius:8px;
font-size:16px;

}

.back{

background:#2563eb;
width:auto;
padding:10px 14px;

}

</style>

</head>

<body>

<button class="back"
onclick="history.back()">

â¬… Back

</button>


<div class="box">

<h2>ðŸ“˜ Upload Ebook</h2>

<input id="title"
placeholder="Ebook Title">

<input id="price"
placeholder="Price">

<br>

Choose Cover Image

<input type="file"
id="image">

<br>

Choose PDF File

<input type="file"
id="pdf">


<button onclick="uploadAll()">

Upload Ebook ðŸš€

</button>

<p id="status"></p>

</div>


<script>

const API=

"https://creatorhub-f2fe.onrender.com/api";


// CLOUDINARY

const CLOUD_NAME="difuuazwn";

const PRESET="creatorhub";



// UPLOAD FUNCTION

async function uploadAll(){

const title=

document.getElementById("title").value;

const price=

document.getElementById("price").value;

const imageFile=

document.getElementById("image").files[0];

const pdfFile=

document.getElementById("pdf").files[0];


if(!title||!price||!imageFile||!pdfFile){

alert("Fill All Fields");

return;

}


try{


document.getElementById("status")

.innerText="Uploading Image...";


// IMAGE UPLOAD

let imgData=new FormData();

imgData.append("file",imageFile);

imgData.append("upload_preset",PRESET);


const imgUpload=

await fetch(

`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,

{

method:"POST",

body:imgData

}

);

const imgRes=

await imgUpload.json();

const imageLink=

imgRes.secure_url;




document.getElementById("status")

.innerText="Uploading PDF...";


// PDF UPLOAD

let pdfData=new FormData();

pdfData.append("file",pdfFile);

pdfData.append("upload_preset",PRESET);


const pdfUpload=

await fetch(

`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/raw/upload`,

{

method:"POST",

body:pdfData

}

);

const pdfRes=

await pdfUpload.json();

const pdfLink=

pdfRes.secure_url;



document.getElementById("status")

.innerText="Saving Ebook...";


// SAVE PRODUCT

await fetch(

API+"/products",

{

method:"POST",

headers:{

"Content-Type":

"application/json"

},

body:JSON.stringify({

title:title,

price:Number(price),

image:imageLink,

pdf:pdfLink

})

}

);


alert("Ebook Uploaded Successfully ðŸ”¥");


location.href="dashboard.html";

}

catch(e){

console.log(e);

alert("Upload Failed");

}

}

</script>

</body>

</html>
