<!DOCTYPE html><html><head><meta name="viewport"
content="width=device-width,initial-scale=1">

<title>Upload Ebook</title><style>

body{
background:#111;
color:white;
font-family:Arial;
padding:20px;
}

.card{
background:#1f2937;
padding:20px;
border-radius:12px;
max-width:500px;
margin:auto;
}

input{
width:100%;
padding:13px;
margin-top:12px;
border:none;
border-radius:8px;
}

button{
width:100%;
padding:15px;
margin-top:15px;
background:orange;
border:none;
border-radius:10px;
font-weight:bold;
cursor:pointer;
}

.back{
background:#2563eb;
padding:10px 15px;
border-radius:8px;
display:inline-block;
margin-bottom:15px;
cursor:pointer;
}

.preview{
width:100%;
margin-top:10px;
border-radius:10px;
display:none;
}

</style></head><body><div class="back"
onclick="history.back()">â¬… Back

</div><div class="card"><h2>ðŸ“˜ Upload Ebook</h2><input id="title"
placeholder="Ebook Title">

<input id="price"
placeholder="Price â‚¹">

<h4>Choose Cover Image</h4><input type="file"
id="imageFile"
accept="image/*"
onchange="previewImage(event)">

<img id="preview"
class="preview">

<input id="pdf"
placeholder="Google Drive Direct PDF Link">

<button onclick="uploadBook()">Upload Ebook ðŸš€

</button></div><script>


// LOGIN USER CHECK

let user=

JSON.parse(localStorage.getItem("user"));

if(!user){

alert("Login First");

location.href="login.html";

}


// IMAGE DATA

let imageBase64="";


// IMAGE PREVIEW

function previewImage(e){

const file=e.target.files[0];

if(!file) return;

const reader=new FileReader();

reader.onload=function(){

imageBase64=reader.result;

const p=

document.getElementById("preview");

p.src=imageBase64;

p.style.display="block";

};

reader.readAsDataURL(file);

}



// EDIT MODE LOAD

let editId=

localStorage.getItem("editProduct");


if(editId){

let products=

JSON.parse(

localStorage.getItem("products")

)||[];

let product=

products.find(

p=>p.id==editId

);

if(product){

title.value=product.title;

price.value=product.price;

pdf.value=product.pdf;

imageBase64=product.image;

preview.src=product.image;

preview.style.display="block";

}

}



// UPLOAD / UPDATE

function uploadBook(){

let title=

document.getElementById("title").value.trim();

let price=

document.getElementById("price").value.trim();

let pdfLink=

document.getElementById("pdf").value.trim();


if(!title||!price||!pdfLink||!imageBase64){

alert("Fill all fields + image");

return;

}


let products=

JSON.parse(

localStorage.getItem("products")

)||[];



// EDIT UPDATE

if(editId){

products=

products.map(p=>{

if(p.id==editId){

return{

...p,

title:title,

price:price,

image:imageBase64,

pdf:pdfLink

};

}

return p;

});


localStorage.removeItem("editProduct");

alert("Updated âœ…");

}


// NEW UPLOAD

else{

products.push({

id:Date.now(),

title:title,

price:price,

image:imageBase64,

pdf:pdfLink,

owner:user.email

});

alert("Upload Successful âœ…");

}



// SAVE

localStorage.setItem(

"products",

JSON.stringify(products)

);


location.href="products.html";

}

</script></body></html>
