<!DOCTYPE html>
<html>

<head>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>Upload Ebook</title>

<style>

body{
background:#111;
color:white;
font-family:Arial;
padding:20px;
margin:0;
}

.back{
background:#2563eb;
padding:10px 18px;
border-radius:8px;
display:inline-block;
cursor:pointer;
margin-bottom:20px;
}

.card{

background:#1f2937;

padding:25px;

border-radius:15px;

max-width:480px;

margin:auto;

}

input{

width:100%;

padding:13px;

margin-top:12px;

border:none;

border-radius:8px;

font-size:15px;

}

label{

display:block;

margin-top:10px;

opacity:.8;

}

button{

width:100%;

margin-top:18px;

padding:15px;

background:orange;

border:none;

border-radius:10px;

font-size:17px;

cursor:pointer;

font-weight:bold;

}

.preview{

width:100%;

margin-top:12px;

border-radius:10px;

display:none;

}

</style>

</head>

<body>

<div class="back"

onclick="history.back()">

‚¨Ö Back

</div>


<div class="card">

<h2>üìò Upload Ebook</h2>

<input id="title"

placeholder="Ebook Title">


<input id="price"

placeholder="Price ‚Çπ">


<label>

Choose Cover Image

</label>

<input

type="file"

id="image"

accept="image/*"

onchange="previewImage(event)"

>

<img id="preview"

class="preview">


<input id="pdf"

placeholder="Google Drive Direct PDF Link">


<button onclick="uploadProduct()">

Upload Ebook üöÄ

</button>

</div>


<script>

const API=

"https://creatorhub-f2fe.onrender.com/api";


// ‚≠ê CHANGE THIS

const CLOUD_NAME="YOUR_CLOUD_NAME";

const UPLOAD_PRESET="creatorhub";


// IMAGE PREVIEW

function previewImage(e){

const file=e.target.files[0];

if(!file) return;

const reader=new FileReader();

reader.onload=function(){

const img=

document.getElementById("preview");

img.src=reader.result;

img.style.display="block";

};

reader.readAsDataURL(file);

}


// CLOUDINARY IMAGE UPLOAD

async function uploadImage(file){

const formData=new FormData();

formData.append(

"file",

file

);

formData.append(

"upload_preset",

UPLOAD_PRESET

);


const res=

await fetch(

`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,

{

method:"POST",

body:formData

});

const data=

await res.json();


if(!data.secure_url){

throw "Image Upload Failed";

}

return data.secure_url;

}


// PRODUCT UPLOAD

async function uploadProduct(){

try{

const title=

document.getElementById("title").value;

const price=

document.getElementById("price").value;

const pdf=

document.getElementById("pdf").value;

const file=

document.getElementById("image").files[0];


if(!title||!price||!pdf){

alert("Fill All Fields");

return;

}

if(!file){

alert("Choose Image");

return;

}


alert("Uploading Image...");


const imageUrl=

await uploadImage(file);


alert("Saving Product...");


const res=

await fetch(

API+"/products",

{

method:"POST",

headers:{

"Content-Type":

"application/json"

},

body:JSON.stringify({

title,

price,

image:imageUrl,

downloadLink:pdf

})

});


if(!res.ok){

throw "API Failed";

}


alert("Upload Success üòÑ");


location.href=

"dashboard.html";

}

catch(e){

console.log(e);

alert("Upload Failed ‚ùå");

}

}

</script>

</body>

</html>
