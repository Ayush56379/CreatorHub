<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><title>Upload Ebook</title><style>

body{
background:#111;
color:white;
font-family:Arial;
padding:20px;
}

.card{
background:#1f2937;
padding:20px;
border-radius:12px;
max-width:500px;
margin:auto;
}

input{
width:100%;
padding:13px;
margin-top:12px;
border:none;
border-radius:8px;
}

button{
width:100%;
padding:15px;
margin-top:15px;
background:orange;
border:none;
border-radius:10px;
font-weight:bold;
cursor:pointer;
}

.back{
background:#2563eb;
padding:10px 15px;
border-radius:8px;
display:inline-block;
margin-bottom:15px;
cursor:pointer;
}

.preview{
width:100%;
margin-top:10px;
border-radius:10px;
display:none;
}

</style></head><body><div class="back"
onclick="history.back()">‚¨Ö Back

</div><div class="card"><h2>üìò Upload Ebook</h2><input id="title"

placeholder="Ebook Title">

<input id="price"

placeholder="Price ‚Çπ">

<h4>Choose Cover Image</h4><input type="file"

accept="image/*"

onchange="previewImage(event)">

<img id="preview"

class="preview">

<h4>Select PDF</h4><input type="file"

accept="application/pdf"

onchange="previewPDF(event)">

<button onclick="uploadBook()">Upload Ebook üöÄ

</button></div><script>


// ‚≠ê GOOGLE DRIVE DATABASE API ‚≠ê

const API=

"https://script.google.com/macros/s/AKfycbz_5CJPDBUTQgVEGaFcmQYQ9DK70CxVvvvS9CyVtxKvQC-SUI0RRQzMEsGMIdK_DMok/exec";


// LOGIN CHECK ‚≠ê‚≠ê‚≠ê

let user=null;

try{

user=JSON.parse(

localStorage.getItem("user")

);

}catch{}


let token=

localStorage.getItem("token");


if(!user || !token){

alert("Login First");

location.href="login.html";

}



// FILE DATA

let imageBase64="";

let pdfBase64="";



// IMAGE PREVIEW

function previewImage(e){

const file=e.target.files[0];

if(!file)return;

const reader=new FileReader();

reader.onload=function(){

imageBase64=reader.result;

preview.src=imageBase64;

preview.style.display="block";

};

reader.readAsDataURL(file);

}



// PDF LOAD

function previewPDF(e){

const file=e.target.files[0];

if(!file)return;

const reader=new FileReader();

reader.onload=function(){

pdfBase64=reader.result;

};

reader.readAsDataURL(file);

}



// LOAD DB

async function getDB(db){

const res=

await fetch(

API+"?db="+db

);

return await res.json();

}



// SAVE DB

async function saveDB(db,data){

await fetch(

API,

{

method:"POST",

body:JSON.stringify({

db:db,

data:data

})

});

}



// ‚≠ê‚≠ê‚≠ê FINAL UPLOAD ‚≠ê‚≠ê‚≠ê

async function uploadBook(){

let title=

document.getElementById("title").value.trim();

let price=

document.getElementById("price").value.trim();


if(!title||!price||

!imageBase64||!pdfBase64){

alert("Fill all fields");

return;

}


alert("Uploading Ebook...");


try{


// LOAD PRODUCTS FROM DRIVE

let products=

await getDB("products");


// ADD PRODUCT

products.push({

id:Date.now(),

title:title,

price:Number(price),

image:imageBase64,

pdf:pdfBase64,

owner:user.email

});


// SAVE TO DRIVE

await saveDB(

"products",

products

);


alert("Upload Successful ‚úÖ");


location.href="products.html";


}catch(e){

alert("Upload Failed");

console.log(e);

}

}


</script></body></html>
