<!DOCTYPE html><html><head><meta name="viewport"
content="width=device-width,initial-scale=1">

<title>CreatorHub Wallet</title><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><style>

body{
margin:0;
font-family:Arial;
background:linear-gradient(
180deg,#020617,#111827);
color:white;
padding:15px;
}

.header{
display:flex;
gap:10px;
align-items:center;
margin-bottom:20px;
}

.back{
background:#2563eb;
padding:10px 18px;
border:none;
border-radius:10px;
color:white;
cursor:pointer;
}

.card{
background:rgba(31,41,55,.9);
padding:20px;
border-radius:18px;
margin-bottom:18px;
box-shadow:0 10px 25px rgba(0,0,0,.5);
}

.balance{
font-size:30px;
font-weight:bold;
color:#22c55e;
margin-top:10px;
}

input{
width:100%;
padding:14px;
margin-top:12px;
border:none;
border-radius:10px;
background:#020617;
color:white;
}

button{
width:100%;
padding:15px;
margin-top:15px;
border:none;
background:linear-gradient(
90deg,#22c55e,#4ade80);
border-radius:12px;
font-weight:bold;
color:white;
cursor:pointer;
}

.item{
background:#020617;
padding:12px;
border-radius:10px;
margin-top:8px;
display:flex;
justify-content:space-between;
}

canvas{
background:#020617;
border-radius:10px;
padding:10px;
}

</style></head><body><div class="header"><button class="back"
onclick="history.back()">

â¬… Back

</button><h2>ğŸ’° My Wallet</h2></div><div class="card"><h3>ğŸ’¸ Available Balance</h3>â‚¹ <span id="balance"
class="balance">

0

</span></div><div class="card"><h3>Withdraw Money</h3><input id="upi"
placeholder="Enter UPI ID">

<input id="amount"
placeholder="Withdraw Amount â‚¹">

<button onclick="withdraw()">Withdraw Request ğŸš€

</button></div><div class="card"><h3>ğŸ“Š Earnings Chart</h3><canvas id="chart"></canvas>

</div><div class="card"><h3>ğŸ“œ Transaction History</h3><div id="history">Loading...

</div></div><script>


const API=

"https://script.google.com/macros/s/AKfycbz_5CJPDBUTQgVEGaFcmQYQ9DK70CxVvvvS9CyVtxKvQC-SUI0RRQzMEsGMIdK_DMok/exec";



// LOGIN CHECK

let user=

JSON.parse(

localStorage.getItem("user")

);

if(!user){

alert("Login First");

location.href="login.html";

}



// GET DRIVE DATA

async function getDB(db){

const res=

await fetch(

API+"?db="+db

);

return await res.json();

}


// SAVE DRIVE

async function saveDB(db,data){

await fetch(

API,

{

method:"POST",

body:JSON.stringify({

db:db,

data:data

})

});

}




let balance=0;



async function loadWallet(){


// LOAD WALLETS

let wallets=

await getDB("wallets");


balance=

wallets[user.email]||0;


// ANIMATION

let show=0;

let el=

document.getElementById("balance");


let anim=

setInterval(()=>{

show+=Math.ceil(balance/20);

if(show>=balance){

show=balance;

clearInterval(anim);

}

el.innerText=show;

},40);




// LOAD TX

let tx=

await getDB("transactions");


let my=

tx.filter(

t=>t.user==user.email

);


let box=

document.getElementById("history");


if(!my.length){

box.innerHTML="No Transactions";

}else{

box.innerHTML="";


my.reverse()

.forEach(h=>{

box.innerHTML+=`

<div class="item">

<div>

â‚¹ ${h.amount}

</div>

<div>

${h.status}

</div>

</div>

`;

});

}


// GRAPH

new Chart(

document.getElementById("chart"),

{

type:"line",

data:{

labels:

my.map((_,i)=>"Tx "+(i+1)),

datasets:[{

label:"Earnings",

data:

my.map(t=>t.amount),

borderWidth:2

}]

}

});

}

loadWallet();




// WITHDRAW â­â­â­

async function withdraw(){


let amount=

document.getElementById(

"amount"

).value;


let upi=

document.getElementById(

"upi"

).value;


if(!amount||!upi){

alert("Fill Details");

return;

}


if(balance<amount){

alert("Low Balance");

return;

}


// LOAD DATA

let wallets=

await getDB("wallets");

let tx=

await getDB("transactions");

let withdraws=

await getDB("withdraws");



// CUT BALANCE

wallets[user.email]-=

Number(amount);


// SAVE HISTORY

tx.push({

user:user.email,

amount:Number(amount),

status:"Pending"

});


// SAVE WITHDRAW REQUEST

withdraws.push({

user:user.email,

amount:Number(amount),

upi:upi,

status:"Pending",

time:new Date().toLocaleString()

});


// SAVE DRIVE

await saveDB(

"wallets",

wallets

);

await saveDB(

"transactions",

tx

);

await saveDB(

"withdraws",

withdraws

);


// OPEN UPI

window.location.href=

"upi://pay?pa="+upi+

"&pn=CreatorHub&am="+amount+

"&cu=INR";


alert("Withdraw Requested âœ…");

location.reload();

}

</script></body></html>
