<!DOCTYPE html>
<html>

<head>

<title>Wallet</title>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<style>

body{

font-family:Arial;
background:#111;
color:white;
padding:20px;

}

.card{

background:#1f2937;
padding:20px;
border-radius:12px;
max-width:500px;
margin:auto;
margin-bottom:15px;

}

button{

width:100%;
padding:14px;
margin-top:10px;
border:none;
background:#22c55e;
color:white;
border-radius:8px;
cursor:pointer;

}

input{

width:100%;
padding:12px;
margin-top:10px;
border-radius:8px;
border:none;

}

.history{

background:#222;
padding:10px;
border-radius:8px;
margin-top:8px;

}

</style>

</head>

<body>


<div class="card">

<h2>

üí∞ My Wallet

</h2>


<h3>

Balance :

‚Çπ <span id="balance">

0

</span>

</h3>

</div>



<div class="card">

<h3>

Withdraw Money

</h3>


<input id="upi"

placeholder="Enter UPI ID">


<input id="amount"

placeholder="Withdraw Amount">


<button onclick="withdrawMoney()">

Withdraw Request üöÄ

</button>

</div>



<div class="card">

<h3>

Transaction History

</h3>

<div id="history">

No Transactions

</div>

</div>



<script>


// LOGIN CHECK

let user=

JSON.parse(

localStorage.getItem("user")

);


if(!user){

alert("Login First");

location.href="login.html";

}



// LOAD WALLET

function loadWallet(){


let wallets=

JSON.parse(

localStorage.getItem("wallets")

)||{};


let balance=

wallets[user.email]||0;


document.getElementById(

"balance"

).innerText=

balance.toFixed(2);


// LOAD HISTORY

let history=

JSON.parse(

localStorage.getItem(

"withdrawRequests"

)

)||[];


let myHistory=

history.filter(

h=>h.user==user.email

);


let box=

document.getElementById("history");

box.innerHTML="";


if(myHistory.length==0){

box.innerHTML="No Transactions";

return;

}


myHistory.reverse().forEach(t=>{


box.innerHTML+=`

<div class="history">

‚Çπ ${t.amount}

<br>

UPI :

${t.upi}

<br>

Status :

${t.status}

<br>

${t.date}

</div>

`;


});


}


loadWallet();



// WITHDRAW REQUEST

function withdrawMoney(){


let amount=

Number(

document.getElementById(

"amount"

).value

);


let upi=

document.getElementById(

"upi"

).value;


if(!amount||!upi){

alert("Fill Details");

return;

}


let wallets=

JSON.parse(

localStorage.getItem("wallets")

)||{};


let balance=

wallets[user.email]||0;


if(amount>balance){

alert("Low Balance");

return;

}


// ‚≠ê MONEY CUT

wallets[user.email]-=amount;


localStorage.setItem(

"wallets",

JSON.stringify(wallets)

);


// SAVE REQUEST

let requests=

JSON.parse(

localStorage.getItem(

"withdrawRequests"

)

)||[];


requests.push({

id:Date.now(),

user:user.email,

amount:amount,

upi:upi,

status:"pending",

date:new Date()

.toLocaleString()

});


localStorage.setItem(

"withdrawRequests",

JSON.stringify(requests)

);


alert("Withdraw Request Sent ‚úÖ");


loadWallet();

}


</script>

</body>

</html>
