<!DOCTYPE html>
<html>

<head>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>CreatorHub Wallet</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{

margin:0;

font-family:Arial;

background:

linear-gradient(

180deg,

#020617,

#111827

);

color:white;

}


/* HEADER */

.header{

background:#000;

padding:15px;

display:flex;

align-items:center;

gap:10px;

}

.back{

background:#2563eb;

padding:10px 16px;

border-radius:10px;

cursor:pointer;

}


/* CONTAINER */

.container{

padding:15px;

}


/* CARD */

.card{

background:

rgba(31,41,55,.95);

padding:20px;

border-radius:18px;

margin-bottom:18px;

box-shadow:

0 10px 25px rgba(0,0,0,.6);

}


/* BALANCE */

.balance{

font-size:32px;

font-weight:bold;

color:#22c55e;

margin-top:10px;

}


/* INPUT */

input{

width:100%;

padding:14px;

margin-top:12px;

border:none;

border-radius:12px;

background:#020617;

color:white;

outline:none;

}


/* BUTTON */

button{

width:100%;

padding:15px;

margin-top:15px;

border:none;

border-radius:14px;

background:

linear-gradient(

90deg,

#22c55e,

#4ade80

);

font-weight:bold;

cursor:pointer;

}


/* HISTORY */

.item{

background:#020617;

padding:12px;

border-radius:10px;

margin-top:8px;

display:flex;

justify-content:space-between;

}


canvas{

background:#020617;

border-radius:12px;

padding:10px;

}


.loader{

display:none;

text-align:center;

}


.spinner{

border:5px solid #111;

border-top:5px solid #22c55e;

width:40px;

height:40px;

border-radius:50%;

animation:spin 1s linear infinite;

margin:auto;

}


@keyframes spin{

100%{

transform:rotate(360deg);

}

}

</style>

</head>


<body>


<div class="header">

<div class="back"

onclick="history.back()">

â¬… Back

</div>

<h3>

ðŸ’° CreatorHub Wallet

</h3>

</div>


<div class="container">


<!-- BALANCE -->

<div class="card">

<h3>

ðŸ’¸ Available Balance

</h3>

â‚¹

<span id="balance"

class="balance">

0

</span>

</div>



<!-- WITHDRAW -->

<div class="card">

<h3>

Withdraw Money

</h3>


<input id="upi"

placeholder="Enter UPI ID">


<input id="amount"

placeholder="Withdraw Amount â‚¹">


<button

onclick="withdraw()">

Withdraw Request ðŸš€

</button>


<div id="loader"

class="loader">

<div class="spinner"></div>

<p>

Processing...

</p>

</div>

</div>



<!-- GRAPH -->

<div class="card">

<h3>

ðŸ“Š Earnings Chart

</h3>

<canvas id="chart">

</canvas>

</div>



<!-- HISTORY -->

<div class="card">

<h3>

ðŸ“œ Transaction History

</h3>

<div id="history">

Loading...

</div>

</div>


</div>



<script>


// â­ API â­

const API=

"https://script.google.com/macros/s/AKfycbz_5CJPDBUTQgVEGaFcmQYQ9DK70CxVvvvS9CyVtxKvQC-SUI0RRQzMEsGMIdK_DMok/exec";




// LOGIN CHECK

let user=

JSON.parse(

localStorage.getItem("user")

);


if(!user){

alert("Login First");

location.href="login.html";

}




async function getDB(db){

const res=

await fetch(

API+"?db="+db

);

return await res.json();

}



async function saveDB(db,data){

await fetch(

API,

{

method:"POST",

body:JSON.stringify({

db:db,

data:data

})

});

}



let balance=0;




// LOAD WALLET

async function loadWallet(){


let wallets=

await getDB("wallets");


balance=

wallets[user.email]||0;


// ANIMATION

let show=0;

let el=

document.getElementById("balance");


let anim=

setInterval(()=>{


show+=Math.ceil(balance/20)||1;


if(show>=balance){

show=balance;

clearInterval(anim);

}


el.innerText=show;


},40);




// LOAD TRANSACTION

let tx=

await getDB("transactions");


let my=

tx.filter(

t=>t.user==user.email

);


let box=

document.getElementById("history");


if(!my.length){

box.innerHTML="No Transactions";

}else{


box.innerHTML="";


my.reverse()

.forEach(h=>{


box.innerHTML+=`

<div class="item">

<div>

â‚¹ ${h.amount}

</div>

<div>

${h.status}

</div>

</div>

`;


});

}



// GRAPH

new Chart(

document.getElementById("chart"),

{

type:"line",

data:{

labels:

my.map((_,i)=>

"Tx "+(i+1)

),

datasets:[{

label:"Earnings",

data:

my.map(

t=>t.amount

),

borderWidth:2

}]

}

});


}


loadWallet();




// WITHDRAW

async function withdraw(){


let amount=

document.getElementById(

"amount"

).value;


let upi=

document.getElementById(

"upi"

).value;


if(!amount||!upi){

alert("Fill Details");

return;

}


if(balance<amount){

alert("Low Balance");

return;

}


document.getElementById(

"loader"

).style.display="block";




// LOAD DB

let wallets=

await getDB("wallets");


let tx=

await getDB("transactions");


let withdraws=

await getDB("withdraws");



// CUT MONEY

wallets[user.email]-=

Number(amount);


// SAVE TX

tx.push({

user:user.email,

amount:Number(amount),

status:"Pending",

time:new Date()

.toLocaleString()

});



// SAVE WITHDRAW

withdraws.push({

user:user.email,

amount:Number(amount),

upi:upi,

status:"Pending",

time:new Date()

.toLocaleString()

});




// SAVE DRIVE

await saveDB(

"wallets",

wallets

);


await saveDB(

"transactions",

tx

);


await saveDB(

"withdraws",

withdraws

);




// OPEN UPI

window.location.href=

"upi://pay?pa="+upi+

"&pn=CreatorHub&am="+amount+

"&cu=INR";


alert(

"Withdraw Requested âœ…"

);


location.reload();

}


</script>


</body>

</html>
