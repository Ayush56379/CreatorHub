<script>

const API =
"https://creatorhub-f2fe.onrender.com/api";


// ⭐ ALREADY LOGIN USER

const already =
localStorage.getItem("token");

if(already){

// Direct Home Page

window.location.replace("index.html");

}



// LOGIN FORM

document.getElementById("loginForm")
.onsubmit = async(e)=>{

e.preventDefault();


const email =
document.getElementById("email").value;

const password =
document.getElementById("password").value;


try{

const res =
await fetch(API+"/auth/login",{

method:"POST",

headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({
email,
password
})

});


const data =
await res.json();


// ⭐ LOGIN SUCCESS

if(data.token){

// SAVE TOKEN

localStorage.setItem(
"token",
data.token
);


// SAVE USER

localStorage.setItem(
"user",
JSON.stringify(data.user)
);


// ⭐ NO ALERT

// alert remove


// ⭐ DIRECT HOME PAGE

window.location.replace(
"index.html"
);

}

else{

alert(
data.message ||
"Login Failed"
);

}

}catch(err){

console.log(err);

alert("Server Error");

}

};

</script>
