<!DOCTYPE html>
<html>

<head>

<meta charset="UTF-8">

<meta name="viewport"
content="width=device-width,initial-scale=1">

<title>CreatorHub Login</title>

<style>

/* DEVICE AUTO THEME */

:root{
--bg:#ffffff;
--text:#111827;
--card:#f3f4f6;
--accent:#22c55e;
}

@media (prefers-color-scheme:dark){

:root{

--bg:#020617;
--text:#ffffff;
--card:#111827;

}

}

body{

margin:0;
font-family:Arial;
background:var(--bg);
color:var(--text);

}

/* HEADER */

.topbar{

display:flex;
align-items:center;
padding:14px;
background:var(--bg);
box-shadow:0 4px 15px rgba(0,0,0,.3);
position:sticky;
top:0;
z-index:99;

}

/* BACK BUTTON */

.back{

font-size:22px;
cursor:pointer;
width:40px;

}

/* TITLE */

.title{

flex:1;
text-align:center;
font-weight:bold;
color:var(--accent);
font-size:18px;

}

</style>


<style>

body{

margin:0;
font-family:Arial;
background:linear-gradient(
180deg,#020617,#0f172a);
display:flex;
justify-content:center;
align-items:center;
height:100vh;
color:white;

}

.card{

background:#111827;
padding:30px;
border-radius:18px;
width:90%;
max-width:420px;
box-shadow:0 0 40px black;

}

h2{

text-align:center;
color:#22c55e;

}

input{

width:100%;
padding:14px;
margin-top:12px;
border:none;
border-radius:10px;
background:#020617;
color:white;
outline:none;

}

button{

width:100%;
padding:14px;
margin-top:15px;
border:none;
border-radius:12px;
background:linear-gradient(
90deg,#22c55e,#4ade80);
color:white;
font-weight:bold;
cursor:pointer;

}

.google{

background:white;
color:black;

}

.preview{

width:80px;
height:80px;
border-radius:50%;
margin-top:10px;
object-fit:cover;
display:none;

}

.small{

text-align:center;
margin-top:12px;
opacity:.7;
cursor:pointer;

}

</style>

</head>

<body>


<div class="topbar">

<div class="back"
onclick="goBack()">

‚¨Ö

</div>

<div class="title">

CreatorHub

</div>

</div>


<div class="card">

<h2>

üî• CreatorHub Login

</h2>


<input id="email"
placeholder="Email">


<input id="pass"
type="password"
placeholder="Password">


<input id="otp"
placeholder="Enter OTP (after send)"
style="display:none;">


<button onclick="sendOTP()">

Send OTP üîê

</button>


<button onclick="login()">

Login / Register üöÄ

</button>


<button class="google"
onclick="googleLogin()">

Continue With Google ‚≠ê

</button>


<h4>

Profile Photo

</h4>

<input type="file"
accept="image/*"
onchange="uploadProfile(event)">


<img id="preview"
class="preview">


<div class="small"
onclick="guest()">

Continue As Guest

</div>


</div>



<script>


// BACK FUNCTION

function goBack(){

history.back();

}


// ‚≠ê‚≠ê‚≠ê GOOGLE DRIVE API ‚≠ê‚≠ê‚≠ê

const API=

"https://script.google.com/macros/s/AKfycbw7xwjcEGIdj3xS8q7qhRNCSbch2uVsXFGFJYWgMNU4UPA-2BSfhq79PHsQ_oCEeYTm/exec";


let OTP="";

let profileBase64="";


// DRIVE LOAD

async function getDB(db){

let res=
await fetch(
API+"?db="+db
);

return await res.json();

}


// DRIVE SAVE

async function saveDB(db,data){

await fetch(API,{
method:"POST",
body:JSON.stringify({
db:db,
data:data
})
});

}


// OTP SEND ‚≠ê‚≠ê‚≠ê

function sendOTP(){

OTP=
Math.floor(
100000+
Math.random()*900000
);

alert(
"Demo OTP : "+OTP
);

document
.getElementById("otp")
.style.display="block";

}


// PROFILE IMAGE

function uploadProfile(e){

const file=
e.target.files[0];

if(!file)return;

const reader=
new FileReader();

reader.onload=function(){

profileBase64=
reader.result;

preview.src=
profileBase64;

preview.style.display="block";

};

reader.readAsDataURL(file);

}


// GOOGLE LOGIN ‚≠ê‚≠ê‚≠ê

function googleLogin(){

let email=
prompt(
"Enter Google Email"
);

if(!email)return;

document.getElementById(
"email"
).value=email;

alert(
"Google Email Added ‚úÖ"
);

}


// LOGIN ‚≠ê‚≠ê‚≠ê

async function login(){

let email=
document.getElementById(
"email"
).value.trim();

let pass=
document.getElementById(
"pass"
).value.trim();

let otpInput=
document.getElementById(
"otp"
).value.trim();

if(!email||!pass){

alert("Fill Details");
return;

}

// OTP VERIFY

if(OTP && otpInput!=OTP){

alert("Wrong OTP");
return;

}

try{

let users=
await getDB("users");

if(!Array.isArray(users))
users=[];

let wallets=
await getDB("wallets");

if(!wallets)
wallets={};

// FIND USER

let user=
users.find(
u=>u.email===email
);

// REGISTER AUTO ‚≠ê‚≠ê‚≠ê

if(!user){

users.push({
email:email,
password:pass,
profile:
profileBase64||
"https://cdn-icons-png.flaticon.com/512/149/149071.png",
banned:false,
created:
new Date()
.toLocaleString()
});

// AUTO WALLET CREATE ‚≠ê‚≠ê‚≠ê

wallets[email]=0;

await saveDB(
"users",
users
);

await saveDB(
"wallets",
wallets
);

}

// LOGIN AGAIN

user=
users.find(
u=>u.email===email
);

// PASSWORD CHECK

if(user.password!==pass){

alert("Wrong Password");
return;

}

// BAN CHECK

if(user.banned){

alert("Account Banned");
return;

}

// SAVE LOGIN

localStorage.setItem(
"user",
JSON.stringify({
email:email
})
);

// PROFILE SAVE LOCAL

localStorage.setItem(
"profile_"+email,
user.profile
);

// TOKEN

localStorage.setItem(
"token",
Date.now()
);

alert("Login Success ‚úÖ");

location.href=
"products.html";

}catch(e){

alert("Server Error");
console.log(e);

}

}


// GUEST LOGIN

function guest(){

localStorage.setItem(
"user",
JSON.stringify({
email:"guest"
})
);

localStorage.setItem(
"token",
Date.now()
);

location.href="products.html";

}


</script>

</body>

</html>
