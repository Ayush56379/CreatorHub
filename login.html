<script>

const API =
"https://creatorhub-f2fe.onrender.com/api";


// LOGIN FORM

document.getElementById("loginForm")

.addEventListener("submit",

async function(e){

e.preventDefault();

const email =
document.getElementById("email").value.trim();

const password =
document.getElementById("password").value.trim();

try{

const res = await fetch(

API + "/auth/login",

{

method:"POST",

headers:{

"Content-Type":"application/json"

},

body:JSON.stringify({

email:email,

password:password

})

}

);

const data = await res.json();


// LOGIN SUCCESS

if(data.token && data.user){

localStorage.setItem(

"token",

data.token

);

localStorage.setItem(

"user",

JSON.stringify(data.user)

);

alert("Login Success ✅");


// DASHBOARD OPEN

window.location.href="./dashboard.html";

}

else{

alert(

data.message ||

"Login Failed"

);

}

}

catch(error){

console.log(error);

alert(

"Server Error — wait 20 sec and try again"

);

}

});

</script>
