<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>My Library - CreatorHub</title>

<style>

/* ================= THEME ================= */

:root{
--bg:#ffffff;
--text:#111827;
--card:#f3f4f6;
--accent:#22c55e;
}

@media(prefers-color-scheme:dark){

:root{

--bg:#020617;
--text:#ffffff;
--card:#111827;

}

}

body{

margin:0;
font-family:Arial;

background:var(--bg);

color:var(--text);

}


/* ================= HEADER ================= */

.topbar{

display:flex;

align-items:center;

padding:14px;

background:var(--bg);

box-shadow:0 5px 20px rgba(0,0,0,.4);

position:sticky;

top:0;

z-index:999;

}

.back{

font-size:22px;

cursor:pointer;

width:40px;

}

.title{

flex:1;

text-align:center;

font-size:18px;

font-weight:bold;

color:var(--accent);

}

.dashboard{

background:var(--accent);

padding:8px 14px;

border-radius:20px;

font-size:13px;

cursor:pointer;

color:white;

text-decoration:none;

}


/* ================= CONTAINER ================= */

.container{

padding:18px;

}


/* ================= GRID ================= */

.grid{

display:grid;

grid-template-columns:

repeat(auto-fit,minmax(230px,1fr));

gap:18px;

}


/* ================= CARD ================= */

.card{

background:var(--card);

border-radius:14px;

padding:14px;

box-shadow:

0 10px 25px rgba(0,0,0,.3);

transition:.3s;

}

.card:hover{

transform:translateY(-6px);

}

.card img{

width:100%;

height:210px;

object-fit:cover;

border-radius:12px;

}


/* ================= TEXT ================= */

.bookTitle{

font-size:17px;

margin-top:10px;

font-weight:bold;

}

.price{

color:var(--accent);

margin-top:6px;

}


/* ================= BUTTON ================= */

.read{

background:

linear-gradient(

90deg,#22c55e,#4ade80);

border:none;

width:100%;

padding:12px;

margin-top:12px;

border-radius:10px;

color:white;

font-weight:bold;

cursor:pointer;

}


/* EMPTY */

.empty{

text-align:center;

opacity:.7;

margin-top:50px;

font-size:18px;

}

</style>

</head>

<body>


<!-- HEADER -->

<div class="topbar">

<div class="back"

onclick="history.back()">

‚¨Ö

</div>


<div class="title">

üìö My Library

</div>


<a class="dashboard"

href="dashboard.html">

Dashboard

</a>

</div>



<div class="container">

<div id="library"

class="grid">

Loading Library...

</div>

</div>


<script>

/* GOOGLE DRIVE API */

const API=

"https://script.google.com/macros/s/AKfycbw7xwjcEGIdj3xS8q7qhRNCSbch2uVsXFGFJYWgMNU4UPA-2BSfhq79PHsQ_oCEeYTm/exec";


/* LOGIN CHECK */

let user=

JSON.parse(

localStorage.getItem("user")

);

if(!user){

alert("Login First");

location.href="login.html";

}


/* DRIVE DB */

async function getDB(db){

const res=

await fetch(

API+"?db="+db

);

return await res.json();

}


/* LOAD LIBRARY */

async function loadLibrary(){

try{

let orders=

await getDB("orders");


const box=

document.getElementById(

"library"

);


/* USER BOOKS */

let myBooks=

orders.filter(

o=>o.user===user.email

);


if(!myBooks.length){

box.innerHTML=

"<div class='empty'>üòÑ No Purchased Ebook Yet</div>";

return;

}


box.innerHTML="";


/* NEW FIRST */

myBooks.reverse()

.forEach(book=>{


let image=

book.image ||

"https://picsum.photos/400";


let pdf=

book.pdf ||

"#";


box.innerHTML+=`

<div class="card">

<img

src="${image}"

onerror="this.src='https://picsum.photos/400'"

>


<div class="bookTitle">

${book.title || "Ebook"}

</div>


<div class="price">

‚Çπ ${book.price || 0}

</div>


<button

class="read"

onclick="openPDF('${pdf}')">

Read Ebook üìñ

</button>

</div>

`;

});

}catch(e){

console.log(e);

document.getElementById(

"library"

).innerHTML=

"‚ùå Library Not Loading";

}

}

loadLibrary();


/* OPEN PDF */

function openPDF(link){

if(!link || link=="#"){

alert("PDF Not Available");

return;

}

window.open(

link,

"_blank"

);

}

</script>

</body>

</html>
