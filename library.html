<!DOCTYPE html>
<html>

<head>

<title>My Library - CreatorHub</title>

<meta name="viewport"
content="width=device-width,initial-scale=1">

<style>

body{

font-family:Arial;
background:#111;
color:white;
margin:0;

}

nav{

background:black;
padding:15px;
display:flex;
justify-content:space-between;

}

.container{

padding:20px;

}

.card{

background:#222;
padding:15px;
margin-top:15px;
border-radius:10px;

}

a{

background:orange;
padding:10px;
display:inline-block;
margin-top:10px;
text-decoration:none;
color:black;
font-weight:bold;

}

</style>

</head>

<body>

<nav>

ðŸ“š My Ebook Library

<a href="dashboard.html">

Dashboard

</a>

</nav>


<div class="container">

<div id="ebooks">

Loading...

</div>

</div>


<script>

const API=
"https://creatorhub-f2fe.onrender.com/api";

const token=
localStorage.getItem("token");


// LOGIN CHECK

if(!token){

location.href="login.html";

}


// LOAD LIBRARY

async function loadLibrary(){

try{

const res=

await fetch(

API+"/orders",

{

headers:{

Authorization:

"Bearer "+token

}

});

const data=

await res.json();

let html="";


if(!data.orders ||

data.orders.length===0){

html="<h3>No Ebook Purchased</h3>";

}


data.orders.forEach(o=>{


// APPROVED ONLY

if(o.paid && o.product){


html+=`

<div class="card">

<h3>

${o.product.title}

</h3>

<p>

Download Your Ebook:

</p>


<a

href="${o.product.pdf}"

target="_blank">

Download Ebook

</a>

</div>

`;

}

});


document.getElementById(

"ebooks"

).innerHTML=

html;

}

catch{

document.getElementById(

"ebooks"

).innerHTML=

"Error Loading Library";

}

}

loadLibrary();

</script>

</body>

</html>
